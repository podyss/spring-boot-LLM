{"version":3,"file":"SortableItem.js","sources":["../../src/components/transfer/SortableItem.tsx"],"sourcesContent":["import { defineComponent, ref, computed, shallowRef, watch } from 'vue';\nimport { CombineProps } from '../interface';\nimport { useSortable } from '@kousum/dnd-kit-vue/sortable';\nimport { pointerIntersection } from '@dnd-kit/collision';\n\ninterface SortableItemProps {\n  id: number | string;\n  item: any;\n  index: number;\n}\n\nexport const vuePropsType: CombineProps<SortableItemProps> = {\n  id: {\n    type: [String, Number],\n    required: true\n  },\n  item: {\n    type: Function,\n    required: true\n  },\n  index: {\n    type: Number,\n    required: true\n  },\n};\nconst SortableItem = defineComponent({\n  props: { ...vuePropsType },\n  name: 'SortableItem',\n  setup(props, {}) {\n\n    const element = ref<Element | null>(null);\n    const handleRef = ref<HTMLButtonElement | null>(null);\n    const id = shallowRef(props.id)\n    watch(()=>props.id, (value, oldValue)=>{\n      console.log(value);\n      if(value !== oldValue){\n        id.value = oldValue;\n      }\n    })\n    const index = shallowRef(props.index)\n    watch(()=>props.index, (value, oldValue)=>{\n      console.log(value);\n      if(value !== oldValue){\n        index.value = oldValue;\n      }\n    })\n    const {isDragSource} = useSortable({\n      id: id as any,\n      index: index as any,\n      element,\n      handle: handleRef,\n      collisionDetector: pointerIntersection\n    });\n\n    return () => {\n      return props.item({ element, handleRef: (v)=>{handleRef.value = v?.$el}, attributes: {'data-shadow': isDragSource?.value,}});\n    };\n  },\n});\n\nexport default SortableItem;\n"],"names":["vuePropsType","id","type","String","Number","required","item","Function","index","SortableItem","defineComponent","props","name","setup","element","ref","handleRef","shallowRef","watch","value","oldValue","console","log","isDragSource","useSortable","handle","collisionDetector","pointerIntersection","v","$el","attributes"],"mappings":";;;AAWO,MAAMA,IAAgD;AAAA,EAC3DC,IAAI;AAAA,IACFC,MAAM,CAACC,QAAQC,MAAM;AAAA,IACrBC,UAAU;AAAA,EACX;AAAA,EACDC,MAAM;AAAA,IACJJ,MAAMK;AAAAA,IACNF,UAAU;AAAA,EACX;AAAA,EACDG,OAAO;AAAA,IACLN,MAAME;AAAAA,IACNC,UAAU;AAAA,EACZ;AACF,GACMI,IAAeC,gBAAAA,EAAgB;AAAA,EACnCC,OAAO;AAAA,IAAE,GAAGX;AAAAA,EAAc;AAAA,EAC1BY,MAAM;AAAA,EACNC,MAAMF,GAAO,IAAI;AAEf,UAAMG,IAAUC,EAAoB,IAAI,GAClCC,IAAYD,EAA8B,IAAI,GAC9Cd,IAAKgB,EAAWN,EAAMV,EAAE;AAC9BiB,IAAAA,EAAM,MAAIP,EAAMV,IAAI,CAACkB,GAAOC,MAAW;AACrCC,cAAQC,IAAIH,CAAK,GACdA,MAAUC,MACXnB,EAAGkB,QAAQC;AAAAA,IAEf,CAAC;AACD,UAAMZ,IAAQS,EAAWN,EAAMH,KAAK;AACpCU,IAAAA,EAAM,MAAIP,EAAMH,OAAO,CAACW,GAAOC,MAAW;AACxCC,cAAQC,IAAIH,CAAK,GACdA,MAAUC,MACXZ,EAAMW,QAAQC;AAAAA,IAElB,CAAC;AACD,UAAM;AAAA,MAACG,cAAAA;AAAAA,IAAa,IAAGC,EAAY;AAAA,MACjCvB,IAAIA;AAAAA,MACJO,OAAOA;AAAAA,MACPM,SAAAA;AAAAA,MACAW,QAAQT;AAAAA,MACRU,mBAAmBC;AAAAA,IACrB,CAAC;AAED,WAAO,MACEhB,EAAML,KAAK;AAAA,MAAEQ,SAAAA;AAAAA,MAASE,WAAYY,CAAAA,MAAI;AAACZ,QAAAA,EAAUG,QAAQS,KAAAA,gBAAAA,EAAGC;AAAAA,MAAI;AAAA,MAAEC,YAAY;AAAA,QAAC,eAAeP,KAAAA,gBAAAA,EAAcJ;AAAAA,MAAM;AAAA,IAAC,CAAC;AAAA,EAE/H;AACF,CAAC;"}