{"version":3,"file":"ColumnSorter.js","sources":["../../src/components/table/ColumnSorter.tsx"],"sourcesContent":["import * as PropTypes from '../PropTypes';\nimport cls from 'classnames';\nimport { noop } from 'lodash';\nimport { IconCaretup, IconCaretdown } from '@kousum/semi-icons-vue';\n\nimport { cssClasses, strings } from '@douyinfe/semi-foundation/table/constants';\n\nimport { SortIcon, SortOrder, TableLocale } from './interface';\nimport isEnterPress from '@douyinfe/semi-foundation/utils/isEnterPress';\nimport { ComponentObjectPropsOptions, CSSProperties, defineComponent, h, PropType, useSlots } from 'vue';\nimport { CombineProps, VueJsxNode } from '../interface';\nimport { vuePropsMake } from '../PropTypes';\nimport Tooltip from '../tooltip';\nimport { getNextSortOrder } from './utils';\nimport LocaleConsumer from '../locale/localeConsumer';\n\nexport interface ColumnSorterProps {\n  className?: string;\n  style?: CSSProperties;\n  onClick?: (e: MouseEvent) => void;\n  prefixCls?: string;\n  sortOrder?: SortOrder;\n  title?: VueJsxNode;\n  sortIcon?: SortIcon;\n  showTooltip?: boolean;\n}\n\nconst propTypes: CombineProps<ColumnSorterProps> = {\n  className: PropTypes.string,\n  style: PropTypes.object,\n  onClick: PropTypes.func as PropType<ColumnSorterProps['onClick']>,\n  prefixCls: PropTypes.string,\n  sortOrder: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  sortIcon: PropTypes.func as PropType<ColumnSorterProps['sortIcon']>,\n  title: PropTypes.any as PropType<ColumnSorterProps['title']>,\n  showTooltip: PropTypes.bool,\n};\n\nconst defaultProps = {\n  prefixCls: cssClasses.PREFIX,\n  onClick: noop,\n  sortOrder: false,\n  showTooltip: false,\n};\nexport const vuePropsType = vuePropsMake(propTypes, defaultProps);\nconst ColumnSorter = defineComponent({\n  props: { ...vuePropsType },\n  name: 'ColumnSorter',\n  setup(props, {}) {\n    const slots = useSlots();\n\n    return () => {\n      const { prefixCls, onClick, sortOrder, style, title, sortIcon, showTooltip } = props;\n\n      const iconBtnSize = 'default';\n\n      const upCls = cls(`${prefixCls}-column-sorter-up`, {\n        on: sortOrder === strings.SORT_DIRECTIONS[0],\n      });\n\n      const downCls = cls(`${prefixCls}-column-sorter-down`, {\n        on: sortOrder === strings.SORT_DIRECTIONS[1],\n      });\n      const ariaProps = {\n        /**\n         * Set 'aria-sort' to aria-columnheader is difficult, so set 'aria-label' about sort info to sorter\n         * reference: https://developer.mozilla.org/en-US/docs/Web/API/Element/ariaSort\n         */\n        'aria-label': `Current sort order is ${sortOrder ? `${sortOrder}ing` : 'none'}`,\n        'aria-roledescription': 'Sort data with this column',\n      };\n\n      const renderSortIcon = () => {\n        if (typeof sortIcon === 'function') {\n          return sortIcon({ sortOrder });\n        } else {\n          const node = (\n            <div style={style} class={`${prefixCls}-column-sorter`}>\n              <span class={`${upCls}`}>\n                <IconCaretup size={iconBtnSize} />\n              </span>\n              <span class={`${downCls}`}>\n                <IconCaretdown size={iconBtnSize} />\n              </span>\n            </div>\n          );\n          if (showTooltip) {\n            let content = getNextSortOrder(sortOrder);\n            return (\n              <LocaleConsumer componentName=\"Table\">\n                {(locale: TableLocale, localeCode: string) => <Tooltip content={locale[content]}>{node}</Tooltip>}\n              </LocaleConsumer>\n            );\n          }\n          return node;\n        }\n      };\n\n      return (\n        <div\n          role=\"button\"\n          {...ariaProps}\n          tabindex={-1}\n          class={`${prefixCls}-column-sorter-wrapper`}\n          onClick={onClick}\n          onKeypress={(e) => isEnterPress(e) && onClick(e as any)}\n        >\n          {title}\n          {renderSortIcon()}\n        </div>\n      );\n    };\n  },\n});\n\nexport default ColumnSorter;\n"],"names":["_isSlot","s","Object","prototype","toString","call","_isVNode","propTypes","className","PropTypes","string","style","object","onClick","func","prefixCls","sortOrder","oneOfType","bool","sortIcon","title","any","showTooltip","defaultProps","cssClasses","PREFIX","noop","vuePropsType","vuePropsMake","ColumnSorter","defineComponent","props","name","setup","useSlots","iconBtnSize","upCls","cls","on","strings","SORT_DIRECTIONS","downCls","ariaProps","renderSortIcon","node","_createVNode","IconCaretup","IconCaretdown","content","getNextSortOrder","LocaleConsumer","default","locale","localeCode","Tooltip","_mergeProps","e","isEnterPress"],"mappings":";;;;;;;;;;;AAcsD,SAAAA,EAAAC,GAAA;AAAA,SAAA,OAAAA,KAAA,cAAAC,OAAAC,UAAAC,SAAAC,KAAAJ,CAAA,MAAAK,qBAAAA,CAAAA,EAAAL,CAAA;AAAA;AAatD,MAAMM,IAA6C;AAAA,EACjDC,WAAWC,EAAUC;AAAAA,EACrBC,OAAOF,EAAUG;AAAAA,EACjBC,SAASJ,EAAUK;AAAAA,EACnBC,WAAWN,EAAUC;AAAAA,EACrBM,WAAWP,EAAUQ,UAAU,CAACR,EAAUC,QAAQD,EAAUS,IAAI,CAAC;AAAA,EACjEC,UAAUV,EAAUK;AAAAA,EACpBM,OAAOX,EAAUY;AAAAA,EACjBC,aAAab,EAAUS;AACzB,GAEMK,IAAe;AAAA,EACnBR,WAAWS,EAAWC;AAAAA,EACtBZ,SAASa;AAAAA,EACTV,WAAW;AAAA,EACXM,aAAa;AACf,GACaK,IAAeC,EAAarB,GAAWgB,CAAY,GAC1DM,IAAeC,gBAAAA,EAAgB;AAAA,EACnCC,OAAO;AAAA,IAAE,GAAGJ;AAAAA,EAAc;AAAA,EAC1BK,MAAM;AAAA,EACNC,MAAMF,GAAO,IAAI;AACDG,WAAAA,EAAU,GAEjB,MAAM;AACX,YAAM;AAAA,QAAEnB,WAAAA;AAAAA,QAAWF,SAAAA;AAAAA,QAASG,WAAAA;AAAAA,QAAWL,OAAAA;AAAAA,QAAOS,OAAAA;AAAAA,QAAOD,UAAAA;AAAAA,QAAUG,aAAAA;AAAAA,MAAa,IAAGS,GAEzEI,IAAc,WAEdC,IAAQC,EAAI,GAAGtB,CAAS,qBAAqB;AAAA,QACjDuB,IAAItB,MAAcuB,EAAQC,gBAAgB,CAAC;AAAA,MAC7C,CAAC,GAEKC,IAAUJ,EAAI,GAAGtB,CAAS,uBAAuB;AAAA,QACrDuB,IAAItB,MAAcuB,EAAQC,gBAAgB,CAAC;AAAA,MAC7C,CAAC,GACKE,IAAY;AAAA;AAAA;AAAA;AAAA;AAAA,QAKhB,cAAc,yBAAyB1B,IAAY,GAAGA,CAAS,QAAQ,MAAM;AAAA,QAC7E,wBAAwB;AAAA,SAGpB2B,IAAiBA,MAAM;AAC3B,YAAI,OAAOxB,KAAa;AACtB,iBAAOA,EAAS;AAAA,YAAEH,WAAAA;AAAAA,UAAU,CAAC;AACxB;AACL,gBAAM4B,IAAIC,EAAA,OAAA;AAAA,YAAA,OACIlC;AAAAA,YAAK,OAAS,GAAGI,CAAS;AAAA,UAAgB,GAAA,CAAA8B,EAAA,QAAA;AAAA,YAAA,OACvC,GAAGT,CAAK;AAAA,aAAES,CAAAA,EAAAC,GAAA;AAAA,YAAA,MACFX;AAAAA,UAAW,GAAA,IAAA,CAAA,CAAA,GAAAU,EAAA,QAAA;AAAA,YAAA,OAEnB,GAAGJ,CAAO;AAAA,aAAEI,CAAAA,EAAAE,GAAA;AAAA,YAAA,MACFZ;AAAAA,aAG1B,IAAA,CAAA,CAAA,CAAA,CAAA;AACD,cAAIb,GAAa;AACf,gBAAI0B,IAAUC,EAAiBjC,CAAS;AACxC,mBAAA6B,EAAAK,GAAA;AAAA,cAAA,eAAA;AAAA,YAAA,GAAA;AAAA,cAAAC,SAEKA,CAACC,GAAqBC,MAAkBR,EAAAS,GAAA;AAAA,gBAAA,SAAuBF,EAAOJ,CAAO;AAAA,cAAC,GAAAhD,EAAG4C,CAAI,IAAJA,IAAI;AAAA,gBAAAO,SAAAA,MAAA,CAAJP,CAAI;AAAA,cAAA,CAAA;AAAA,YAAW,CAAA;AAAA,UAGvG;AACA,iBAAOA;AAAAA,QACT;AAAA;AAGF,aAAAC,SAAAU,EAAA;AAAA,QAAA,MAAA;AAAA,MAAA,GAGQb,GAAS;AAAA,QAAA,UACH;AAAA,QAAE,OACL,GAAG3B,CAAS;AAAA,QAAwB,SAClCF;AAAAA,QAAO,YACH2C,CAAAA,MAAMC,EAAaD,CAAC,KAAK3C,EAAQ2C,CAAQ;AAAA,MAAC,CAAA,GAAA,CAEtDpC,GACAuB,EAAc,CAAE,CAAA;AAAA;EAIzB;AACF,CAAC;"}