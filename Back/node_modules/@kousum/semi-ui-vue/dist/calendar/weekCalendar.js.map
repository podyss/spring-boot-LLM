{"version":3,"file":"weekCalendar.js","sources":["../../src/components/calendar/weekCalendar.tsx"],"sourcesContent":["import cls from 'classnames';\nimport * as PropTypes from '../PropTypes';\nimport CalendarFoundation, {\n  CalendarAdapter,\n  EventObject,\n  ParsedEvents,\n  ParsedEventsType,\n  ParsedRangeEvent,\n  WeeklyData,\n} from '@douyinfe/semi-foundation/calendar/foundation';\nimport LocaleConsumer from '../locale/localeConsumer';\nimport { cssClasses } from '@douyinfe/semi-foundation/calendar/constants';\nimport DayCol from './dayCol';\nimport TimeCol from './timeCol';\nimport { isEqual } from 'lodash';\nimport { calcRowHeight } from '@douyinfe/semi-foundation/calendar/eventUtil';\nimport { WeekCalendarProps } from './interface';\n\nimport '@douyinfe/semi-foundation/calendar/calendar.scss';\nimport { Locale } from '../locale/interface';\nimport {\n  ComponentObjectPropsOptions,\n  defineComponent,\n  Fragment,\n  h,\n  onBeforeUnmount,\n  onMounted,\n  PropType,\n  reactive,\n  ref,\n  useSlots,\n  watch,\n} from 'vue';\nimport { vuePropsMake } from '../PropTypes';\nimport { useBaseComponent } from '../_base/baseComponent';\nimport { CombineProps } from '../interface';\n\nconst toPercent = (num: number) => {\n  const res = num < 1 ? num * 100 : 100;\n  return `${res}%`;\n};\n\nconst prefixCls = `${cssClasses.PREFIX}-week`;\nconst allDayCls = `${cssClasses.PREFIX}-all-day`;\n\nexport interface WeekCalendarState {\n  scrollHeight: number;\n  parsedEvents: ParsedEvents;\n  cachedKeys: Array<string>;\n}\n\nconst propTypes: CombineProps<WeekCalendarProps> = {\n  displayValue: PropTypes.object,\n  header: PropTypes.node,\n  events: PropTypes.array,\n  mode: PropTypes.string as PropType<WeekCalendarProps['mode']>,\n  showCurrTime: PropTypes.bool,\n  markWeekend: PropTypes.bool,\n  scrollTop: PropTypes.number,\n  renderTimeDisplay: PropTypes.func as PropType<WeekCalendarProps['renderTimeDisplay']>,\n  renderDateDisplay: PropTypes.func as PropType<WeekCalendarProps['renderDateDisplay']>,\n  dateGridRender: PropTypes.func as PropType<WeekCalendarProps['dateGridRender']>,\n  allDayEventsRender: PropTypes.func as PropType<WeekCalendarProps['allDayEventsRender']>,\n  width: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  height: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  style: PropTypes.object,\n  className: PropTypes.string,\n\n  range: PropTypes.array,\n  weekStartsOn: PropTypes.number as PropType<WeekCalendarProps['weekStartsOn']>,\n  onClick: PropTypes.func as PropType<WeekCalendarProps['onClick']>,\n  minEventHeight: PropTypes.number as PropType<WeekCalendarProps['minEventHeight']>,\n  onClose: PropTypes.func as PropType<WeekCalendarProps['onClose']>,\n};\n\nconst defaultProps = {\n  displayValue: new Date(),\n  events: [] as Array<EventObject>,\n  mode: 'week',\n};\nexport const vuePropsType = vuePropsMake<WeekCalendarProps>(propTypes, defaultProps);\nconst WeekCalendar = defineComponent({\n  props: { ...vuePropsType },\n  name: 'WeekCalendar',\n  setup(props, {}) {\n    const slots = useSlots();\n\n    const dom = ref();\n    const scrollDom = ref();\n    let allDayRowHeight: number = 1;\n\n    let weeklyData: WeeklyData;\n\n    const state = reactive<WeekCalendarState>({\n      scrollHeight: 0,\n      parsedEvents: {\n        day: new Map(),\n        allDay: new Map(),\n      },\n      cachedKeys: [],\n    });\n\n    const { adapter: adapterInject, getDataAttr } = useBaseComponent<WeekCalendarProps>(props, state);\n    function adapter_(): CalendarAdapter<WeekCalendarProps, WeekCalendarState> {\n      return {\n        ...adapterInject(),\n        setWeeklyData: (data) => {\n          weeklyData = data;\n        },\n        getWeeklyData: () => weeklyData,\n        updateScrollHeight: (scrollHeight) => {\n          state.scrollHeight = scrollHeight;\n        },\n        setParsedEvents: (parsedEvents: ParsedEventsType) => {\n          state.parsedEvents = parsedEvents as ParsedEvents;\n        },\n        cacheEventKeys: (cachedKeys) => {\n          state.cachedKeys = cachedKeys;\n        },\n      };\n    }\n\n    const adapter = adapter_();\n    const foundation = new CalendarFoundation(adapter);\n\n    onMounted(() => {\n      foundation.init();\n      const { scrollHeight } = scrollDom.value;\n      dom.value.scrollTop = props.scrollTop;\n      foundation.notifyScrollHeight(scrollHeight);\n      foundation.parseWeeklyEvents();\n    });\n\n    watch(\n      [() => state.cachedKeys, () => props.events, () => props.displayValue],\n      (value, [prevStateCachedKeys, _, prevPropsDisplayValue], onCleanup) => {\n        const prevEventKeys = prevStateCachedKeys;\n        const nowEventKeys = props.events.map((event) => event.key);\n        if (!isEqual(prevEventKeys, nowEventKeys) || !isEqual(prevPropsDisplayValue, props.displayValue)) {\n          foundation.parseWeeklyEvents();\n        }\n      }\n    );\n\n    onBeforeUnmount(() => {\n      foundation.destroy();\n    });\n\n    const checkWeekend = (val: Date) => foundation.checkWeekend(val);\n\n    const handleClick = (e: MouseEvent, val: [Date, number, number, number]) => {\n      const { onClick } = props;\n      const value = foundation.formatCbValue(val);\n      onClick && onClick(e, value);\n    };\n\n    const renderDayGrid = () => {\n      const { parsedEvents } = state;\n      const events = parsedEvents.day;\n      const { week } = weeklyData;\n      const { markWeekend, dateGridRender, minEventHeight } = props;\n      const inner = week.map((day) => {\n        const dateString = day.date.toString();\n        const dayEvents = events.has(dateString) ? events.get(dateString) : [];\n        const parsed = foundation.getParseDailyEvents(dayEvents, day.date);\n        return (\n          <DayCol\n            key={`${dateString}-weekday`}\n            displayValue={day.date}\n            scrollHeight={state.scrollHeight}\n            handleClick={handleClick}\n            events={parsed.day}\n            showCurrTime={props.showCurrTime}\n            isWeekend={markWeekend && day.isWeekend}\n            dateGridRender={dateGridRender}\n            minEventHeight={minEventHeight}\n          />\n        );\n      });\n      return inner;\n    };\n\n    const renderHeader = (dateFnsLocale: any) => {\n      const { markWeekend, displayValue, renderDateDisplay } = props;\n      const { month, week } = foundation.getWeeklyData(displayValue, dateFnsLocale);\n      return (\n        <div class={`${prefixCls}-header`}>\n          <ul class={`${cssClasses.PREFIX}-tag ${prefixCls}-tag ${prefixCls}-sticky-left`}>\n            <span>{month}</span>\n          </ul>\n          <div role=\"gridcell\" class={`${prefixCls}-grid`}>\n            <ul class={`${prefixCls}-grid-row`}>\n              {week.map((day) => {\n                const { date, dayString, weekday, isToday } = day;\n                const listCls = cls({\n                  [`${cssClasses.PREFIX}-today`]: isToday,\n                  [`${cssClasses.PREFIX}-weekend`]: markWeekend && day.isWeekend,\n                });\n                const dateContent = renderDateDisplay ? (\n                  renderDateDisplay(date)\n                ) : (\n                  <Fragment>\n                    <span class={`${cssClasses.PREFIX}-today-date`}>{dayString}</span>\n                    <span>{weekday}</span>\n                  </Fragment>\n                );\n                return (\n                  <li key={`${date.toString()}-weekheader`} class={listCls}>\n                    {dateContent}\n                  </li>\n                );\n              })}\n            </ul>\n          </div>\n        </div>\n      );\n    };\n\n    const renderAllDayEvents = (events: ParsedRangeEvent[]) => {\n      if (props.allDayEventsRender) {\n        return props.allDayEventsRender(props.events);\n      }\n      const list = events.map((event, ind) => {\n        const { leftPos, width, topInd, children, key } = event;\n        const top = `${topInd}em`;\n        const style = {\n          left: toPercent(leftPos),\n          width: toPercent(width),\n          top,\n        };\n        return (\n          <li\n            class={`${cssClasses.PREFIX}-event-item ${cssClasses.PREFIX}-event-allday`}\n            key={`allDay-${ind}`}\n            style={style}\n          >\n            {children}\n          </li>\n        );\n      });\n      return list;\n    };\n\n    const renderAllDay = (locale: Locale['Calendar']) => {\n      const { allDayEventsRender } = props;\n      const { allDay } = state.parsedEvents;\n      const parsed = foundation.parseWeeklyAllDayEvents(allDay);\n      const style = allDayEventsRender\n        ? null\n        : {\n            height: `${calcRowHeight(parsed)}em`,\n          };\n      const { markWeekend } = props;\n      const { week } = weeklyData;\n      return (\n        <div class={`${allDayCls}`} style={style}>\n          <ul class={`${cssClasses.PREFIX}-tag ${allDayCls}-tag ${prefixCls}-sticky-left`}>\n            <span>{locale.allDay}</span>\n          </ul>\n          <div role=\"gridcell\" class={`${cssClasses.PREFIX}-content ${allDayCls}-content`}>\n            <ul class={`${allDayCls}-skeleton`}>\n              {Object.keys(week).map((date, ind) => {\n                const listCls = cls({\n                  [`${cssClasses.PREFIX}-weekend`]: markWeekend && week[date].isWeekend,\n                });\n                return <li key={`${date}-weekgrid`} class={listCls} />;\n              })}\n            </ul>\n            <ul class={`${cssClasses.PREFIX}-event-items`}>{renderAllDayEvents(parsed)}</ul>\n          </div>\n        </div>\n      );\n    };\n\n    return () => {\n      const { renderTimeDisplay, className, height, width, style, header } = props;\n      const weekCls = cls(prefixCls, className);\n      const weekStyle = {\n        height: typeof height === 'string' ? height : height + 'px',\n        width: typeof width === 'string' ? width : width + 'px',\n        ...style,\n      };\n      return (\n        <LocaleConsumer componentName=\"Calendar\">\n          {(locale: Locale['Calendar'], localeCode: string, dateFnsLocale: any) => (\n            <div class={weekCls} style={weekStyle} ref={dom} {...getDataAttr()}>\n              <div class={`${prefixCls}-sticky-top`}>\n                {header}\n                {renderHeader(dateFnsLocale)}\n                {renderAllDay(locale)}\n              </div>\n              <div class={`${prefixCls}-scroll-wrapper`}>\n                <div class={`${prefixCls}-scroll`} ref={scrollDom}>\n                  <TimeCol className={`${prefixCls}-sticky-left`} renderTimeDisplay={renderTimeDisplay} />\n                  {renderDayGrid()}\n                </div>\n              </div>\n            </div>\n          )}\n        </LocaleConsumer>\n      );\n    };\n  },\n});\n\nexport default WeekCalendar;\n"],"names":["toPercent","num","prefixCls","cssClasses","PREFIX","allDayCls","propTypes","displayValue","PropTypes","object","header","node","events","array","mode","string","showCurrTime","bool","markWeekend","scrollTop","number","renderTimeDisplay","func","renderDateDisplay","dateGridRender","allDayEventsRender","width","oneOfType","height","style","className","range","weekStartsOn","onClick","minEventHeight","onClose","defaultProps","Date","vuePropsType","vuePropsMake","WeekCalendar","defineComponent","props","name","setup","useSlots","dom","ref","scrollDom","weeklyData","state","reactive","scrollHeight","parsedEvents","day","Map","allDay","cachedKeys","adapter","adapterInject","getDataAttr","useBaseComponent","adapter_","setWeeklyData","data","getWeeklyData","updateScrollHeight","setParsedEvents","cacheEventKeys","foundation","CalendarFoundation","onMounted","init","value","notifyScrollHeight","parseWeeklyEvents","watch","prevStateCachedKeys","_","prevPropsDisplayValue","onCleanup","prevEventKeys","nowEventKeys","map","event","key","isEqual","onBeforeUnmount","destroy","handleClick","e","val","formatCbValue","renderDayGrid","week","dateString","date","toString","dayEvents","has","get","parsed","getParseDailyEvents","_createVNode","DayCol","isWeekend","renderHeader","dateFnsLocale","month","dayString","weekday","isToday","listCls","cls","dateContent","_Fragment","renderAllDayEvents","ind","leftPos","topInd","children","top","left","renderAllDay","locale","parseWeeklyAllDayEvents","calcRowHeight","Object","keys","weekCls","weekStyle","LocaleConsumer","default","localeCode","_mergeProps","TimeCol"],"mappings":";;;;;;;;;;;;;AAqCA,MAAMA,IAAaC,CAAAA,MAEV,GADKA,IAAM,IAAIA,IAAM,MAAM,GACrB,KAGTC,IAAY,GAAGC,EAAWC,MAAM,SAChCC,IAAY,GAAGF,EAAWC,MAAM,YAQhCE,IAA6C;AAAA,EACjDC,cAAcC,EAAUC;AAAAA,EACxBC,QAAQF,EAAUG;AAAAA,EAClBC,QAAQJ,EAAUK;AAAAA,EAClBC,MAAMN,EAAUO;AAAAA,EAChBC,cAAcR,EAAUS;AAAAA,EACxBC,aAAaV,EAAUS;AAAAA,EACvBE,WAAWX,EAAUY;AAAAA,EACrBC,mBAAmBb,EAAUc;AAAAA,EAC7BC,mBAAmBf,EAAUc;AAAAA,EAC7BE,gBAAgBhB,EAAUc;AAAAA,EAC1BG,oBAAoBjB,EAAUc;AAAAA,EAC9BI,OAAOlB,EAAUmB,UAAU,CAACnB,EAAUY,QAAQZ,EAAUO,MAAM,CAAC;AAAA,EAC/Da,QAAQpB,EAAUmB,UAAU,CAACnB,EAAUY,QAAQZ,EAAUO,MAAM,CAAC;AAAA,EAChEc,OAAOrB,EAAUC;AAAAA,EACjBqB,WAAWtB,EAAUO;AAAAA,EAErBgB,OAAOvB,EAAUK;AAAAA,EACjBmB,cAAcxB,EAAUY;AAAAA,EACxBa,SAASzB,EAAUc;AAAAA,EACnBY,gBAAgB1B,EAAUY;AAAAA,EAC1Be,SAAS3B,EAAUc;AACrB,GAEMc,IAAe;AAAA,EACnB7B,cAAc,oBAAI8B,KAAM;AAAA,EACxBzB,QAAQ,CAAwB;AAAA,EAChCE,MAAM;AACR,GACawB,KAAeC,EAAgCjC,GAAW8B,CAAY,GAC7EI,KAAeC,gBAAAA,EAAgB;AAAA,EACnCC,OAAO;AAAA,IAAE,GAAGJ;AAAAA,EAAc;AAAA,EAC1BK,MAAM;AAAA,EACNC,MAAMF,GAAO,IAAI;AACDG,IAAAA,EAAU;AAExB,UAAMC,IAAMC,KACNC,IAAYD;AAGlB,QAAIE;AAEJ,UAAMC,IAAQC,EAA4B;AAAA,MACxCC,cAAc;AAAA,MACdC,cAAc;AAAA,QACZC,KAAK,oBAAIC,IAAK;AAAA,QACdC,QAAQ,oBAAID,IAAI;AAAA,MACjB;AAAA,MACDE,YAAY,CAAA;AAAA,IACd,CAAC,GAEK;AAAA,MAAEC,SAASC;AAAAA,MAAeC,aAAAA;AAAAA,IAAY,IAAIC,EAAoCnB,GAAOQ,CAAK;AAChG,aAASY,IAAkE;AACzE,aAAO;AAAA,QACL,GAAGH,EAAe;AAAA,QAClBI,eAAgBC,CAAAA,MAAS;AACvBf,UAAAA,IAAae;AAAAA,QACd;AAAA,QACDC,eAAeA,MAAMhB;AAAAA,QACrBiB,oBAAqBd,CAAAA,MAAiB;AACpCF,UAAAA,EAAME,eAAeA;AAAAA,QACtB;AAAA,QACDe,iBAAkBd,CAAAA,MAAmC;AACnDH,UAAAA,EAAMG,eAAeA;AAAAA,QACtB;AAAA,QACDe,gBAAiBX,CAAAA,MAAe;AAC9BP,UAAAA,EAAMO,aAAaA;AAAAA,QACrB;AAAA;IAEJ;AAEA,UAAMC,IAAUI,KACVO,IAAa,IAAIC,EAAmBZ,CAAO;AAEjDa,IAAAA,EAAU,MAAM;AACdF,MAAAA,EAAWG,KAAI;AACf,YAAM;AAAA,QAAEpB,cAAAA;AAAAA,UAAiBJ,EAAUyB;AACnC3B,MAAAA,EAAI2B,MAAMtD,YAAYuB,EAAMvB,WAC5BkD,EAAWK,mBAAmBtB,CAAY,GAC1CiB,EAAWM,kBAAiB;AAAA,IAC9B,CAAC,GAEDC,EACE,CAAC,MAAM1B,EAAMO,YAAY,MAAMf,EAAM9B,QAAQ,MAAM8B,EAAMnC,YAAY,GACrE,CAACkE,GAAO,CAACI,GAAqBC,GAAGC,CAAqB,GAAGC,MAAc;AACrE,YAAMC,IAAgBJ,GAChBK,IAAexC,EAAM9B,OAAOuE,IAAKC,CAAAA,MAAUA,EAAMC,GAAG;AAC1D,OAAI,CAACC,EAAQL,GAAeC,CAAY,KAAK,CAACI,EAAQP,GAAuBrC,EAAMnC,YAAY,MAC7F8D,EAAWM,kBAAiB;AAAA,IAEhC,CACF,GAEAY,EAAgB,MAAM;AACpBlB,MAAAA,EAAWmB,QAAO;AAAA,IACpB,CAAC;AAID,UAAMC,IAAcA,CAACC,GAAeC,MAAwC;AAC1E,YAAM;AAAA,QAAE1D,SAAAA;AAAAA,MAAS,IAAGS,GACd+B,IAAQJ,EAAWuB,cAAcD,CAAG;AAC1C1D,MAAAA,KAAWA,EAAQyD,GAAGjB,CAAK;AAAA,OAGvBoB,IAAgBA,MAAM;AAC1B,YAAM;AAAA,QAAExC,cAAAA;AAAAA,MAAc,IAAGH,GACnBtC,IAASyC,EAAaC,KACtB;AAAA,QAAEwC,MAAAA;AAAAA,MAAM,IAAG7C,GACX;AAAA,QAAE/B,aAAAA;AAAAA,QAAaM,gBAAAA;AAAAA,QAAgBU,gBAAAA;AAAAA,MAAgB,IAAGQ;AAmBxD,aAlBcoD,EAAKX,IAAK7B,CAAAA,MAAQ;AAC9B,cAAMyC,IAAazC,EAAI0C,KAAKC,SAAQ,GAC9BC,IAAYtF,EAAOuF,IAAIJ,CAAU,IAAInF,EAAOwF,IAAIL,CAAU,IAAI,IAC9DM,IAAShC,EAAWiC,oBAAoBJ,GAAW5C,EAAI0C,IAAI;AACjE,eAAAO,EAAAC,GAAA;AAAA,UAAA,KAES,GAAGT,CAAU;AAAA,UAAU,cACdzC,EAAI0C;AAAAA,UAAI,cACR9C,EAAME;AAAAA,UAAY,aACnBqC;AAAAA,UAAW,QAChBY,EAAO/C;AAAAA,UAAG,cACJZ,EAAM1B;AAAAA,UAAY,WACrBE,KAAeoC,EAAImD;AAAAA,UAAS,gBACvBjF;AAAAA,UAAc,gBACdU;AAAAA,QAAc,GAAA,IAAA;AAAA,MAGpC,CAAC;AAAA,OAIGwE,IAAgBC,CAAAA,MAAuB;AAC3C,YAAM;AAAA,QAAEzF,aAAAA;AAAAA,QAAaX,cAAAA;AAAAA,QAAcgB,mBAAAA;AAAAA,MAAmB,IAAGmB,GACnD;AAAA,QAAEkE,OAAAA;AAAAA,QAAOd,MAAAA;AAAAA,MAAM,IAAGzB,EAAWJ,cAAc1D,GAAcoG,CAAa;AAC5E,aAAAJ,EAAA,OAAA;AAAA,QAAA,OACc,GAAGrG,CAAS;AAAA,MAAS,GAAA,CAAAqG,EAAA,MAAA;AAAA,QAAA,OACpB,GAAGpG,EAAWC,MAAM,QAAQF,CAAS,QAAQA,CAAS;AAAA,MAAc,GAAA,CAAAqG,EAAA,QAAA,MAAA,CACtEK,CAAK,CAAA,CAAA,CAAA,GAAAL,EAAA,OAAA;AAAA,QAAA,MAAA;AAAA,QAAA,OAEc,GAAGrG,CAAS;AAAA,MAAO,GAAA,CAAAqG,EAAA,MAAA;AAAA,QAAA,OAClC,GAAGrG,CAAS;AAAA,MAAW,GAAA,CAC/B4F,EAAKX,IAAK7B,CAAAA,MAAQ;AACjB,cAAM;AAAA,UAAE0C,MAAAA;AAAAA,UAAMa,WAAAA;AAAAA,UAAWC,SAAAA;AAAAA,UAASC,SAAAA;AAAAA,QAAS,IAAGzD,GACxC0D,IAAUC,EAAI;AAAA,UAClB,CAAC,GAAG9G,EAAWC,MAAM,QAAQ,GAAG2G;AAAAA,UAChC,CAAC,GAAG5G,EAAWC,MAAM,UAAU,GAAGc,KAAeoC,EAAImD;AAAAA,QACvD,CAAC,GACKS,IAAc3F,IAClBA,EAAkByE,CAAI,IAACO,EAAAY,UAAAZ,EAAA,QAAA;AAAA,UAAA,OAGR,GAAGpG,EAAWC,MAAM;AAAA,QAAa,GAAA,CAAGyG,CAAS,CAAA,GAAAN,EAAA,QAAA,MAAA,CACnDO,CAAO,CAEjB,CAAA,CAAA;AACD,eAAAP,EAAA,MAAA;AAAA,UAAA,KACW,GAAGP,EAAKC,SAAQ,CAAE;AAAA,UAAa,OAASe;AAAAA,QAAO,GAAA,CACrDE,CAAW,CAAA;AAAA,MAGlB,CAAC,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,OAONE,IAAsBxG,CAAAA,MACtB8B,EAAMjB,qBACDiB,EAAMjB,mBAAmBiB,EAAM9B,MAAM,IAEjCA,EAAOuE,IAAI,CAACC,GAAOiC,MAAQ;AACtC,YAAM;AAAA,QAAEC,SAAAA;AAAAA,QAAS5F,OAAAA;AAAAA,QAAO6F,QAAAA;AAAAA,QAAQC,UAAAA;AAAAA,QAAUnC,KAAAA;AAAAA,MAAK,IAAGD,GAC5CqC,IAAM,GAAGF,CAAM,MACf1F,IAAQ;AAAA,QACZ6F,MAAM1H,EAAUsH,CAAO;AAAA,QACvB5F,OAAO1B,EAAU0B,CAAK;AAAA,QACtB+F,KAAAA;AAAAA;AAEF,aAAAlB,EAAA,MAAA;AAAA,QAAA,OAEW,GAAGpG,EAAWC,MAAM,eAAeD,EAAWC,MAAM;AAAA,QAAe,KACrE,UAAUiH,CAAG;AAAA,QAAE,OACbxF;AAAAA,MAAK,GAAA,CAEX2F,CAAQ,CAAA;AAAA,IAGf,CAAC,GAIGG,IAAgBC,CAAAA,MAA+B;AACnD,YAAM;AAAA,QAAEnG,oBAAAA;AAAAA,MAAoB,IAAGiB,GACzB;AAAA,QAAEc,QAAAA;AAAAA,UAAWN,EAAMG,cACnBgD,IAAShC,EAAWwD,wBAAwBrE,CAAM,GAClD3B,IAAQJ,IACV,OACA;AAAA,QACEG,QAAQ,GAAGkG,EAAczB,CAAM,CAAC;AAAA,SAEhC;AAAA,QAAEnF,aAAAA;AAAAA,MAAa,IAAGwB,GAClB;AAAA,QAAEoD,MAAAA;AAAAA,MAAM,IAAG7C;AACjB,aAAAsD,EAAA,OAAA;AAAA,QAAA,OACc,GAAGlG,CAAS;AAAA,QAAE,OAASwB;AAAAA,MAAK,GAAA,CAAA0E,EAAA,MAAA;AAAA,QAAA,OAC3B,GAAGpG,EAAWC,MAAM,QAAQC,CAAS,QAAQH,CAAS;AAAA,MAAc,GAAA,CAAAqG,EACtEqB,QAAAA,MAAAA,CAAAA,EAAOpE,MAAM,MAAA+C,EAAA,OAAA;AAAA,QAAA,MAAA;AAAA,QAAA,OAEM,GAAGpG,EAAWC,MAAM,YAAYC,CAAS;AAAA,MAAU,GAAA,CAAAkG,EAAA,MAAA;AAAA,QAAA,OAClE,GAAGlG,CAAS;AAAA,MAAW,GAAA,CAC/B0H,OAAOC,KAAKlC,CAAI,EAAEX,IAAI,CAACa,GAAMqB,MAAQ;AACpC,cAAML,IAAUC,EAAI;AAAA,UAClB,CAAC,GAAG9G,EAAWC,MAAM,UAAU,GAAGc,KAAe4E,EAAKE,CAAI,EAAES;AAAAA,QAC9D,CAAC;AACD,eAAAF,EAAA,MAAA;AAAA,UAAA,KAAgB,GAAGP,CAAI;AAAA,UAAW,OAASgB;AAAAA,QAAO,GAAA,IAAA;AAAA,OACnD,CAAC,IAAAT,EAAA,MAAA;AAAA,QAAA,OAEO,GAAGpG,EAAWC,MAAM;AAAA,SAAiBgH,CAAAA,EAAmBf,CAAM,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA;AAMlF,WAAO,MAAM;AACX,YAAM;AAAA,QAAEhF,mBAAAA;AAAAA,QAAmBS,WAAAA;AAAAA,QAAWF,QAAAA;AAAAA,QAAQF,OAAAA;AAAAA,QAAOG,OAAAA;AAAAA,QAAOnB,QAAAA;AAAAA,MAAQ,IAAGgC,GACjEuF,IAAUhB,EAAI/G,GAAW4B,CAAS,GAClCoG,IAAY;AAAA,QAChBtG,QAAQ,OAAOA,KAAW,WAAWA,IAASA,IAAS;AAAA,QACvDF,OAAO,OAAOA,KAAU,WAAWA,IAAQA,IAAQ;AAAA,QACnD,GAAGG;AAAAA;AAEL,aAAA0E,EAAA4B,GAAA;AAAA,QAAA,eAAA;AAAA,MAAA,GAAA;AAAA,QAAAC,SAEKA,CAACR,GAA4BS,GAAoB1B,MAAkBJ,EAAA,OAAA+B,EAAA;AAAA,UAAA,OACtDL;AAAAA,UAAO,OAASC;AAAAA,UAAS,KAAOpF;AAAAA,QAAG,GAAMc,EAAa,CAAA,GAAA,CAAA2C,EAAA,OAAA;AAAA,UAAA,OACpD,GAAGrG,CAAS;AAAA,QAAa,GAAA,CAClCQ,GACAgG,EAAaC,CAAa,GAC1BgB,EAAaC,CAAM,CAAC,CAAA,GAAArB,EAAA,OAAA;AAAA,UAAA,OAEX,GAAGrG,CAAS;AAAA,QAAiB,GAAA,CAAAqG,EAAA,OAAA;AAAA,UAAA,OAC3B,GAAGrG,CAAS;AAAA,UAAS,KAAO8C;AAAAA,WAASuD,CAAAA,EAAAgC,GAAA;AAAA,UAAA,WAC3B,GAAGrI,CAAS;AAAA,UAAc,mBAAqBmB;AAAAA,QAClEwE,GAAAA,IAAAA,GAAAA,EAAe,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,MAIvB,CAAA;AAAA;EAIT;AACF,CAAC;"}