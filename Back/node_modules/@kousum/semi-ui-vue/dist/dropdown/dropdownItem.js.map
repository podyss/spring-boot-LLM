{"version":3,"file":"dropdownItem.js","sources":["../../src/components/dropdown/dropdownItem.tsx"],"sourcesContent":["import { defineComponent, ref, h, onActivated, Fragment, provide, inject, PropType } from 'vue';\nimport cls from 'classnames';\nimport * as PropTypes from '../PropTypes';\nimport { cssClasses as css, strings } from '@douyinfe/semi-foundation/dropdown/constants';\n\nimport { BaseProps } from '../_base/baseComponent';\nimport { IconTick } from '@kousum/semi-icons-vue';\nimport { noop } from 'lodash';\nimport { vuePropsMake } from '../PropTypes';\nimport { useDropdownContext } from './context/Consumer';\nimport { ComponentObjectPropsOptions } from 'vue';\nimport getDataAttr from '@douyinfe/semi-foundation/utils/getDataAttr';\nimport { CombineProps } from '../interface';\n\nexport type Type = 'primary' | 'secondary' | 'tertiary' | 'warning' | 'danger';\n\nexport interface DropdownItemProps extends BaseProps {\n  forwardRef?: any;\n  disabled?: boolean;\n  selected?: boolean;\n  onClick?: (payload: MouseEvent) => void;\n  onMouseenter?: (payload: MouseEvent) => void;\n  onMouseleave?: (payload: MouseEvent) => void;\n  onContextmenu?: (payload: MouseEvent) => void;\n  type?: Type;\n  active?: boolean;\n  icon?: JSX.Element;\n  onKeyDown?: (e: KeyboardEvent) => void;\n  showTick?: boolean;\n  /** internal prop, please do not use  */\n  hover?: boolean;\n  name?: string;\n}\n\nconst prefixCls = css.PREFIX;\nconst propTypes: CombineProps<DropdownItemProps> = {\n  name: PropTypes.string,\n  disabled: PropTypes.bool,\n  selected: PropTypes.bool,\n  onClick: PropTypes.func as PropType<DropdownItemProps['onClick']>,\n  onMouseenter: PropTypes.func as PropType<DropdownItemProps['onMouseenter']>,\n  onMouseleave: PropTypes.func as PropType<DropdownItemProps['onMouseleave']>,\n  onContextmenu: PropTypes.func as PropType<DropdownItemProps['onContextmenu']>,\n  className: PropTypes.string,\n  style: PropTypes.object,\n  forwardRef: [PropTypes.object, PropTypes.func],\n  type: String as PropType<DropdownItemProps['type']>,\n  active: PropTypes.bool,\n  icon: PropTypes.node as PropType<DropdownItemProps['icon']>,\n  onKeyDown: PropTypes.func as PropType<DropdownItemProps['onKeyDown']>,\n  showTick: PropTypes.bool,\n  /** internal prop, please do not use  */\n  hover: PropTypes.bool,\n};\nconst defaultProps = {\n  disabled: false,\n  divided: false,\n  selected: false,\n  onMouseEnter: noop,\n  onMouseLeave: noop,\n  forwardRef: noop,\n};\n\nexport const vuePropsType = vuePropsMake<DropdownItemProps>(propTypes, defaultProps);\nconst DropdownItem = defineComponent({\n  props: { ...vuePropsType },\n  name: 'DropdownItem',\n  setup(props, { slots, attrs }) {\n    const { context } = useDropdownContext();\n    let elementType: string = 'Dropdown.Item';\n\n    return () => {\n      const { disabled, className, forwardRef, style, type, active, icon, onKeyDown, showTick, hover } = props;\n      const { showTick: contextShowTick } = context.value;\n      const realShowTick = contextShowTick ?? showTick;\n      const itemclass = cls(className, {\n        [`${prefixCls}-item`]: true,\n        [`${prefixCls}-item-disabled`]: disabled,\n        [`${prefixCls}-item-hover`]: hover,\n        [`${prefixCls}-item-withTick`]: realShowTick,\n        [`${prefixCls}-item-${type}`]: type,\n        [`${prefixCls}-item-active`]: active,\n      });\n\n      const events: Partial<{\n        onClick: (e: MouseEvent) => void;\n        onMousedown: (e: MouseEvent) => void;\n        onMouseenter: (e: MouseEvent) => void;\n        onMouseleave: (e: MouseEvent) => void;\n        onContextmenu: (e: MouseEvent) => void;\n      }> = {};\n      if (!disabled) {\n        ['onClick', 'onMouseenter', 'onMouseleave', 'onContextmenu'].forEach((eventName) => {\n          const isInAnotherDropdown = context.value.level !== 1;\n          if (isInAnotherDropdown && eventName === 'onClick') {\n            events['onMouseDown'] = (e: MouseEvent) => {\n              if (e.button === 0) {\n                props[eventName]?.(e);\n              }\n            };\n          } else {\n            events[eventName] = props[eventName];\n          }\n        });\n      }\n      let tick = null;\n      switch (true) {\n        case realShowTick && active:\n          tick = <IconTick />;\n          break;\n        case realShowTick && !active:\n          tick = <IconTick style={{ color: 'transparent' }} />;\n          break;\n        default:\n          tick = null;\n          break;\n      }\n      let iconContent = null;\n      if (icon) {\n        iconContent = <div class={`${prefixCls}-item-icon`}>{icon}</div>;\n      }\n      return (\n        <li\n          role=\"menuitem\"\n          tabindex={-1}\n          aria-disabled={disabled}\n          {...events}\n          onKeydown={onKeyDown}\n          ref={forwardRef}\n          class={itemclass}\n          style={style}\n          {...getDataAttr({ ...props, ...attrs })}\n        >\n          {tick}\n          {iconContent}\n          {slots.default?.()}\n        </li>\n      );\n    };\n  },\n});\n\nexport default DropdownItem;\n"],"names":["prefixCls","css","PREFIX","propTypes","name","PropTypes","string","disabled","bool","selected","onClick","func","onMouseenter","onMouseleave","onContextmenu","className","style","object","forwardRef","type","String","active","icon","node","onKeyDown","showTick","hover","defaultProps","divided","onMouseEnter","noop","onMouseLeave","vuePropsType","vuePropsMake","DropdownItem","defineComponent","props","setup","slots","attrs","context","useDropdownContext","contextShowTick","value","realShowTick","itemclass","cls","events","forEach","eventName","level","e","button","tick","_createVNode","IconTick","color","iconContent","_mergeProps","getDataAttr","default"],"mappings":"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"}