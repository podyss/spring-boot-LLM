{"version":3,"file":"navSteps.js","sources":["../../src/components/steps/navSteps.tsx"],"sourcesContent":["import * as PropTypes from '../PropTypes';\nimport { vuePropsMake } from '../PropTypes';\nimport cls from 'classnames';\nimport { stepsClasses as css } from '@douyinfe/semi-foundation/steps/constants';\nimport {\n  cloneVNode,\n  ComponentObjectPropsOptions,\n  CSSProperties,\n  defineComponent,\n  h,\n  isVNode,\n  PropType,\n  useAttrs,\n  useSlots,\n  VNode,\n} from 'vue';\nimport { noop } from 'lodash';\nimport { NavStepProps } from './navStep';\nimport { Direction, Status } from './basicSteps';\nimport getDataAttr from '@douyinfe/semi-foundation/utils/getDataAttr';\nimport { CombineProps } from '../interface';\n\nexport type Size = 'default' | 'small';\nexport interface NavStepsProps {\n  prefixCls?: string;\n  className?: string;\n  style?: CSSProperties;\n  direction?: Direction;\n  current?: number;\n  initial?: number;\n  size?: Size;\n  children?: VNode[];\n  onChange?: (current: number) => void;\n  'aria-label'?: string;\n  status?: Status;\n}\n\nconst propTypes: CombineProps<NavStepsProps> = {\n  prefixCls: PropTypes.string,\n  className: PropTypes.string,\n  style: PropTypes.object,\n  current: PropTypes.number,\n  initial: PropTypes.number,\n  children: PropTypes.node as PropType<NavStepsProps['children']>,\n  onChange: PropTypes.func as PropType<NavStepsProps['onChange']>,\n  'aria-label': PropTypes.string,\n  direction: PropTypes.string as PropType<NavStepsProps['direction']>,\n  size: PropTypes.string as PropType<NavStepsProps['size']>,\n  status: PropTypes.string as PropType<NavStepsProps['status']>,\n};\nconst defaultProps = {\n  prefixCls: css.PREFIX,\n  current: 0,\n  direction: 'horizontal',\n  size: 'default',\n  initial: 0,\n  status: 'process',\n  onChange: noop,\n};\nexport const vuePropsType = vuePropsMake<NavStepsProps>(propTypes, defaultProps);\nconst NavSteps = defineComponent({\n  props: { ...vuePropsType },\n  name: 'NavSteps',\n  setup(props, {}) {\n    const slots = useSlots();\n    const attr = useAttrs();\n\n    return () => {\n      const { size, current, initial, children, prefixCls, className, style, onChange, ...rest } = props;\n      const inner = () => {\n        const filteredChildren = children.filter((c) => isVNode(c)) as Array<VNode>;\n        const total = filteredChildren.length;\n        const content = filteredChildren.map((child: VNode, index) => {\n          if (!child) {\n            return null;\n          }\n          const childProps: NavStepProps = {\n            index,\n            total,\n            ...child.props,\n          };\n          childProps.active = index === current;\n          childProps.onChange = onChange\n            ? () => {\n                if (index !== current) {\n                  onChange(index + initial);\n                }\n              }\n            : undefined;\n          return cloneVNode(child, { ...childProps });\n        });\n        return content;\n      };\n\n      const wrapperCls = cls(className, {\n        [`${prefixCls}-nav`]: true,\n        [`${prefixCls}-${size}`]: size !== 'default',\n      });\n\n      return (\n        <div aria-label={props['aria-label']} class={wrapperCls} style={style} {...getDataAttr({ ...rest, ...attr })}>\n          {inner()}\n        </div>\n      );\n    };\n  },\n});\n\nexport default NavSteps;\n"],"names":["propTypes","prefixCls","PropTypes","string","className","style","object","current","number","initial","children","node","onChange","func","direction","size","status","defaultProps","css","PREFIX","noop","vuePropsType","vuePropsMake","NavSteps","defineComponent","props","name","setup","useSlots","attr","useAttrs","rest","inner","filteredChildren","filter","c","isVNode","total","length","map","child","index","childProps","active","undefined","cloneVNode","wrapperCls","cls","_createVNode","_mergeProps","getDataAttr"],"mappings":";;;;;;;AAqCA,MAAMA,IAAyC;AAAA,EAC7CC,WAAWC,EAAUC;AAAAA,EACrBC,WAAWF,EAAUC;AAAAA,EACrBE,OAAOH,EAAUI;AAAAA,EACjBC,SAASL,EAAUM;AAAAA,EACnBC,SAASP,EAAUM;AAAAA,EACnBE,UAAUR,EAAUS;AAAAA,EACpBC,UAAUV,EAAUW;AAAAA,EACpB,cAAcX,EAAUC;AAAAA,EACxBW,WAAWZ,EAAUC;AAAAA,EACrBY,MAAMb,EAAUC;AAAAA,EAChBa,QAAQd,EAAUC;AACpB,GACMc,IAAe;AAAA,EACnBhB,WAAWiB,EAAIC;AAAAA,EACfZ,SAAS;AAAA,EACTO,WAAW;AAAA,EACXC,MAAM;AAAA,EACNN,SAAS;AAAA,EACTO,QAAQ;AAAA,EACRJ,UAAUQ;AACZ,GACaC,IAAeC,EAA4BtB,GAAWiB,CAAY,GACzEM,IAAWC,gBAAAA,EAAgB;AAAA,EAC/BC,OAAO;AAAA,IAAE,GAAGJ;AAAAA,EAAc;AAAA,EAC1BK,MAAM;AAAA,EACNC,MAAMF,GAAO,IAAI;AACDG,IAAAA,EAAU;AACxB,UAAMC,IAAOC;AAEb,WAAO,MAAM;AACX,YAAM;AAAA,QAAEf,MAAAA;AAAAA,QAAMR,SAAAA;AAAAA,QAASE,SAAAA;AAAAA,QAASC,UAAAA;AAAAA,QAAUT,WAAAA;AAAAA,QAAWG,WAAAA;AAAAA,QAAWC,OAAAA;AAAAA,QAAOO,UAAAA;AAAAA,QAAU,GAAGmB;AAAAA,MAAM,IAAGN,GACvFO,IAAQA,MAAM;AAClB,cAAMC,IAAmBvB,EAASwB,OAAQC,CAAAA,MAAMC,EAAQD,CAAC,CAAC,GACpDE,IAAQJ,EAAiBK;AAoB/B,eAnBgBL,EAAiBM,IAAI,CAACC,GAAcC,MAAU;AAC5D,cAAI,CAACD;AACH,mBAAO;AAET,gBAAME,IAA2B;AAAA,YAC/BD,OAAAA;AAAAA,YACAJ,OAAAA;AAAAA,YACA,GAAGG,EAAMf;AAAAA;AAEXiB,iBAAAA,EAAWC,SAASF,MAAUlC,GAC9BmC,EAAW9B,WAAWA,IAClB,MAAM;AACJ,YAAI6B,MAAUlC,KACZK,EAAS6B,IAAQhC,CAAO;AAAA,UAE3B,IACDmC,QACGC,EAAWL,GAAO;AAAA,YAAE,GAAGE;AAAAA,UAAW,CAAC;AAAA,QAC5C,CAAC;AAAA,SAIGI,IAAaC,EAAI3C,GAAW;AAAA,QAChC,CAAC,GAAGH,CAAS,MAAM,GAAG;AAAA,QACtB,CAAC,GAAGA,CAAS,IAAIc,CAAI,EAAE,GAAGA,MAAS;AAAA,MACrC,CAAC;AAED,aAAAiC,SAAAC,EAAA;AAAA,QAAA,cACmBxB,EAAM,YAAY;AAAA,QAAC,OAASqB;AAAAA,QAAU,OAASzC;AAAAA,MAAK,GAAM6C,EAAY;AAAA,QAAE,GAAGnB;AAAAA,QAAM,GAAGF;AAAAA,MAAM,CAAA,CAAC,GAAA,CACzGG,EAAO,CAAA,CAAA;AAAA;EAIhB;AACF,CAAC;"}