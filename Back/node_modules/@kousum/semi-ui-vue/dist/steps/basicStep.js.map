{"version":3,"file":"basicStep.js","sources":["../../src/components/steps/basicStep.tsx"],"sourcesContent":["import { isFunction, noop } from 'lodash';\nimport * as PropTypes from '../PropTypes';\nimport classnames from 'classnames';\nimport { stepsClasses as css } from '@douyinfe/semi-foundation/steps/constants';\nimport { IconTickCircle, IconAlertCircle, IconAlertTriangle } from '@kousum/semi-icons-vue';\nimport { CombineProps, VueJsxNode } from '../interface';\nimport { CSSProperties, defineComponent, useSlots, h, isVNode, ComponentObjectPropsOptions, PropType } from 'vue';\nimport { AriaAttributes } from '../AriaAttributes';\nimport { vuePropsMake } from '../PropTypes';\nimport { Direction } from './fillSteps';\nimport { useHasInProps } from '../_base/baseComponent';\n\nexport type Status = 'wait' | 'process' | 'finish' | 'error' | 'warning';\nexport type Size = 'default' | 'small';\nexport interface BasicStepProps {\n  description?: VueJsxNode;\n  icon?: VueJsxNode;\n  status?: Status;\n  title?: VueJsxNode;\n  className?: string;\n  style?: CSSProperties;\n  active?: boolean;\n  prefixCls?: string;\n  stepNumber?: string;\n  size?: Size;\n  done?: boolean;\n  onChange?: () => void;\n  onClick?: any;\n  onKeyDown?: any;\n  role?: string;\n  'aria-label'?: AriaAttributes['aria-label'];\n  direction?: Direction;\n}\nexport enum stepSizeMapIconSize {\n  small = 'large',\n  default = 'extra-large',\n}\n\nconst propTypes: CombineProps<BasicStepProps> = {\n  prefixCls: PropTypes.string,\n  description: PropTypes.node,\n  icon: PropTypes.node,\n  status: PropTypes.string as PropType<BasicStepProps['status']>,\n  title: PropTypes.node,\n  className: PropTypes.string,\n  style: PropTypes.object,\n  onClick: PropTypes.func,\n  active: PropTypes.bool,\n  done: PropTypes.bool,\n\n  direction: PropTypes.string as PropType<BasicStepProps['direction']>,\n  // children: PropTypes.node as PropType<BasicStepProps['children']>,\n  onChange: PropTypes.func as PropType<BasicStepProps['onChange']>,\n  stepNumber: [PropTypes.number, PropTypes.string] as PropType<BasicStepProps['stepNumber']>,\n  size: PropTypes.string as PropType<BasicStepProps['size']>,\n  onKeyDown: PropTypes.func,\n  role: PropTypes.string,\n  'aria-label': PropTypes.string,\n};\nconst defaultProps = {\n  prefixCls: css.ITEM,\n  active: false,\n  done: false,\n  status: 'wait',\n  className: '',\n  size: 'default',\n  onChange: noop,\n};\nexport const vuePropsType = vuePropsMake<BasicStepProps>(propTypes, defaultProps);\nconst BasicStep = defineComponent({\n  props: { ...vuePropsType },\n  name: 'BasicStep',\n  setup(props, {}) {\n    const { getProps } = useHasInProps();\n    const slots = useSlots();\n\n    return () => {\n      const {\n        prefixCls,\n        className,\n        size,\n        title,\n        description,\n        status,\n        style,\n        active,\n        done,\n        icon,\n        stepNumber,\n        onClick,\n        onChange,\n        onKeyDown,\n      } = props;\n      const renderIcon = () => {\n        let inner, progress;\n\n        if ('icon' in getProps(props)) {\n          if (isVNode(icon)) {\n            inner = icon;\n          }\n        } else if ('status' in getProps(props)) {\n          switch (status) {\n            case 'error':\n              inner = <IconAlertCircle size={stepSizeMapIconSize[size]} />;\n              break;\n            case 'wait':\n              inner = <span class={`${prefixCls}-number-icon`}>{stepNumber}</span>;\n              break;\n            case 'process':\n              inner = <span class={`${prefixCls}-number-icon`}>{stepNumber}</span>;\n              progress = true;\n              break;\n            case 'finish':\n              inner = <IconTickCircle size={stepSizeMapIconSize[size]} />;\n              break;\n            case 'warning':\n              inner = <IconAlertTriangle size={stepSizeMapIconSize[size]} />;\n              break;\n            default:\n              inner = null;\n              break;\n          }\n        }\n        const cls = classnames({\n          [`${prefixCls}-icon`]: true,\n          [`${prefixCls}-custom-icon`]: 'icon' in getProps(props),\n          [`${prefixCls}-icon-process`]: progress,\n        });\n\n        return inner ? <span class={cls}>{inner}</span> : null;\n      };\n\n      const classString = classnames(\n        prefixCls,\n        `${prefixCls}-${status}`,\n        {\n          [`${prefixCls}-active`]: active,\n          [`${prefixCls}-done`]: done,\n          [`${prefixCls}-hover`]: onChange || props.onClick,\n          [`${prefixCls}-clickable`]: onChange || onClick,\n          [`${prefixCls}-${status}-hover`]: onChange || props.onClick,\n        },\n        className\n      );\n      const handleClick = (e: MouseEvent) => {\n        onClick?.(e);\n        onChange?.();\n      };\n      const handleKeyDown = (e) => {\n        if (e.key === 'Enter') {\n          onKeyDown?.(e);\n          onChange?.();\n        }\n      };\n      return (\n        <div\n          role={props['role']}\n          aria-label={props['aria-label']}\n          tabindex={0}\n          aria-current=\"step\"\n          class={classString}\n          style={style}\n          onClick={(e) => handleClick(e)}\n          onKeydown={handleKeyDown}\n        >\n          <div class={`${prefixCls}-container`}>\n            <div class={`${prefixCls}-left`}>{renderIcon()}</div>\n            <div class={`${prefixCls}-content`}>\n              <div class={`${prefixCls}-title`}>\n                <div class={`${prefixCls}-title-text`}>{title}</div>\n              </div>\n              {description && <div class={`${prefixCls}-description`}>{description}</div>}\n            </div>\n          </div>\n        </div>\n      );\n    };\n  },\n});\n\nexport default BasicStep;\n"],"names":["stepSizeMapIconSize","propTypes","prefixCls","PropTypes","string","description","node","icon","status","title","className","style","object","onClick","func","active","bool","done","direction","onChange","stepNumber","number","size","onKeyDown","role","defaultProps","css","ITEM","noop","vuePropsType","vuePropsMake","BasicStep","defineComponent","props","name","setup","getProps","useHasInProps","useSlots","renderIcon","inner","progress","isVNode","_createVNode","IconAlertCircle","IconTickCircle","IconAlertTriangle","cls","classnames","classString","handleClick","e","handleKeyDown","key"],"mappings":";;;;;;;;AAiCYA,IAAAA,6BAAAA,GAAmB;AAAnBA,SAAAA,EAAmB,QAAA,SAAnBA,EAAmB,UAAA,eAAnBA;AAAmB,EAAA,EAAA;AAK/B,MAAMC,IAA0C;AAAA,EAC9CC,WAAWC,EAAUC;AAAAA,EACrBC,aAAaF,EAAUG;AAAAA,EACvBC,MAAMJ,EAAUG;AAAAA,EAChBE,QAAQL,EAAUC;AAAAA,EAClBK,OAAON,EAAUG;AAAAA,EACjBI,WAAWP,EAAUC;AAAAA,EACrBO,OAAOR,EAAUS;AAAAA,EACjBC,SAASV,EAAUW;AAAAA,EACnBC,QAAQZ,EAAUa;AAAAA,EAClBC,MAAMd,EAAUa;AAAAA,EAEhBE,WAAWf,EAAUC;AAAAA;AAAAA,EAErBe,UAAUhB,EAAUW;AAAAA,EACpBM,YAAY,CAACjB,EAAUkB,QAAQlB,EAAUC,MAAM;AAAA,EAC/CkB,MAAMnB,EAAUC;AAAAA,EAChBmB,WAAWpB,EAAUW;AAAAA,EACrBU,MAAMrB,EAAUC;AAAAA,EAChB,cAAcD,EAAUC;AAC1B,GACMqB,IAAe;AAAA,EACnBvB,WAAWwB,EAAIC;AAAAA,EACfZ,QAAQ;AAAA,EACRE,MAAM;AAAA,EACNT,QAAQ;AAAA,EACRE,WAAW;AAAA,EACXY,MAAM;AAAA,EACNH,UAAUS;AACZ,GACaC,IAAeC,EAA6B7B,GAAWwB,CAAY,GAC1EM,IAAYC,gBAAAA,EAAgB;AAAA,EAChCC,OAAO;AAAA,IAAE,GAAGJ;AAAAA,EAAc;AAAA,EAC1BK,MAAM;AAAA,EACNC,MAAMF,GAAO,IAAI;AACf,UAAM;AAAA,MAAEG,UAAAA;AAAAA,IAAU,IAAGC,EAAa;AACpBC,WAAAA,EAAU,GAEjB,MAAM;AACX,YAAM;AAAA,QACJpC,WAAAA;AAAAA,QACAQ,WAAAA;AAAAA,QACAY,MAAAA;AAAAA,QACAb,OAAAA;AAAAA,QACAJ,aAAAA;AAAAA,QACAG,QAAAA;AAAAA,QACAG,OAAAA;AAAAA,QACAI,QAAAA;AAAAA,QACAE,MAAAA;AAAAA,QACAV,MAAAA;AAAAA,QACAa,YAAAA;AAAAA,QACAP,SAAAA;AAAAA,QACAM,UAAAA;AAAAA,QACAI,WAAAA;AAAAA,MACD,IAAGU,GACEM,IAAaA,MAAM;AACvB,YAAIC,GAAOC;AAEX,YAAI,UAAUL,EAASH,CAAK;AAC1B,UAAIS,EAAQnC,CAAI,MACdiC,IAAQjC;AAAAA,iBAED,YAAY6B,EAASH,CAAK;AACnC,kBAAQzB,GAAM;AAAA,YACZ,KAAK;AACHgC,cAAAA,IAAKG,EAAAC,GAAA;AAAA,gBAAA,MAA0B5C,EAAoBsB,CAAI;AAAA,cAAK,GAAA,IAAA;AAC5D;AAAA,YACF,KAAK;AACHkB,cAAAA,IAAKG,EAAA,QAAA;AAAA,gBAAA,OAAgB,GAAGzC,CAAS;AAAA,cAAc,GAAA,CAAGkB,CAAU,CAAQ;AACpE;AAAA,YACF,KAAK;AACHoB,cAAAA,IAAKG,EAAA,QAAA;AAAA,gBAAA,OAAgB,GAAGzC,CAAS;AAAA,cAAc,GAAA,CAAGkB,CAAU,CAAQ,GACpEqB,IAAW;AACX;AAAA,YACF,KAAK;AACHD,cAAAA,IAAKG,EAAAE,GAAA;AAAA,gBAAA,MAAyB7C,EAAoBsB,CAAI;AAAA,cAAK,GAAA,IAAA;AAC3D;AAAA,YACF,KAAK;AACHkB,cAAAA,IAAKG,EAAAG,GAAA;AAAA,gBAAA,MAA4B9C,EAAoBsB,CAAI;AAAA,cAAK,GAAA,IAAA;AAC9D;AAAA,YACF;AACEkB,cAAAA,IAAQ;AACR;AAAA,UACJ;AAEF,cAAMO,IAAMC,EAAW;AAAA,UACrB,CAAC,GAAG9C,CAAS,OAAO,GAAG;AAAA,UACvB,CAAC,GAAGA,CAAS,cAAc,GAAG,UAAUkC,EAASH,CAAK;AAAA,UACtD,CAAC,GAAG/B,CAAS,eAAe,GAAGuC;AAAAA,QACjC,CAAC;AAED,eAAOD,IAAKG,EAAA,QAAA;AAAA,UAAA,OAAgBI;AAAAA,WAAMP,CAAAA,CAAK,KAAW;AAAA,SAG9CS,IAAcD,EAClB9C,GACA,GAAGA,CAAS,IAAIM,CAAM,IACtB;AAAA,QACE,CAAC,GAAGN,CAAS,SAAS,GAAGa;AAAAA,QACzB,CAAC,GAAGb,CAAS,OAAO,GAAGe;AAAAA,QACvB,CAAC,GAAGf,CAAS,QAAQ,GAAGiB,KAAYc,EAAMpB;AAAAA,QAC1C,CAAC,GAAGX,CAAS,YAAY,GAAGiB,KAAYN;AAAAA,QACxC,CAAC,GAAGX,CAAS,IAAIM,CAAM,QAAQ,GAAGW,KAAYc,EAAMpB;AAAAA,MACrD,GACDH,CACF,GACMwC,IAAeC,CAAAA,MAAkB;AACrCtC,QAAAA,KAAAA,QAAAA,EAAUsC,IACVhC,KAAAA,QAAAA;AAAAA,SAEIiC,IAAiBD,CAAAA,MAAM;AAC3B,QAAIA,EAAEE,QAAQ,YACZ9B,KAAAA,QAAAA,EAAY4B,IACZhC,KAAAA,QAAAA;AAAAA;AAGJ,aAAAwB,EAAA,OAAA;AAAA,QAAA,MAEUV,EAAM;AAAA,QAAO,cACPA,EAAM,YAAY;AAAA,QAAC,UACrB;AAAA,QAAC,gBAAA;AAAA,QAAA,OAEJgB;AAAAA,QAAW,OACXtC;AAAAA,QAAK,SACFwC,CAAAA,MAAMD,EAAYC,CAAC;AAAA,QAAC,WACnBC;AAAAA,MAAa,GAAA,CAAAT,EAAA,OAAA;AAAA,QAAA,OAEZ,GAAGzC,CAAS;AAAA,MAAY,GAAA,CAAAyC,EAAA,OAAA;AAAA,QAAA,OACtB,GAAGzC,CAAS;AAAA,MAAO,GAAA,CAAGqC,EAAY,CAAA,CAAA,GAAAI,EAAA,OAAA;AAAA,QAAA,OAClC,GAAGzC,CAAS;AAAA,MAAU,GAAA,CAAAyC,EAAA,OAAA;AAAA,QAAA,OACpB,GAAGzC,CAAS;AAAA,MAAQ,GAAA,CAAAyC,EAAA,OAAA;AAAA,QAAA,OAClB,GAAGzC,CAAS;AAAA,MAAa,GAAA,CAAGO,CAAK,CAAA,CAAA,CAAA,GAE9CJ,KAAWsC,EAAA,OAAA;AAAA,QAAA,OAAgB,GAAGzC,CAAS;AAAA,MAAc,GAAA,CAAGG,CAAW,CAAO,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA;EAMvF;AACF,CAAC;"}