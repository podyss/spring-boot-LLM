{"version":3,"file":"index.js","sources":["../../src/components/toast/index.tsx"],"sourcesContent":["import * as PropTypes from '../PropTypes';\nimport ToastListFoundation, {\n  ToastListAdapter,\n  ToastListProps,\n  ToastListState,\n} from '@douyinfe/semi-foundation/toast/toastListFoundation';\nimport { cssClasses, strings } from '@douyinfe/semi-foundation/toast/constants';\nimport Toast from './toast';\nimport '@douyinfe/semi-foundation/toast/toast.scss';\nimport getUuid from '@douyinfe/semi-foundation/utils/uuid';\nimport useToast from './useToast';\nimport { ConfigProps, ToastInstance, ToastProps, ToastState } from '@douyinfe/semi-foundation/toast/toastFoundation';\nimport CSSAnimation from '../_cssAnimation';\nimport cls from 'classnames';\nimport { Motion } from '../_base/base';\nimport {\n  CSSProperties,\n  defineComponent,\n  h,\n  reactive,\n  useSlots,\n  Fragment,\n  render,\n  createApp,\n  App,\n  ref,\n  createVNode,\n  getCurrentInstance,\n  shallowRef,\n} from 'vue';\nimport { VueJsxNode } from '../interface';\nimport { vuePropsMake } from '../PropTypes';\nimport { useBaseComponent } from '../_base/baseComponent';\n\nexport interface ToastReactProps extends ToastProps {\n  id?: string;\n  style?: CSSProperties;\n  icon?: VueJsxNode;\n  content: VueJsxNode;\n}\n\nexport type { ConfigProps, ToastListProps, ToastListState, ToastState };\n\nconst ToastList = defineComponent({\n  props: {\n    content: PropTypes.node,\n    duration: PropTypes.number,\n    onClose: PropTypes.func,\n    icon: PropTypes.node,\n    direction: String,\n    stack: PropTypes.bool,\n    // ref: [Function, Object],\n  },\n  name: 'ToastList',\n  setup(props, { expose }) {\n    const slots = useSlots();\n    const stack = shallowRef<boolean>(false);\n\n    function setStack(v: boolean) {\n      stack.value = v;\n    }\n    function getStack() {\n      return stack.value;\n    }\n    const currentInstance = getCurrentInstance();\n\n    let innerWrapperRef = ref();\n\n    const state = reactive<ToastListState>({\n      list: [],\n      removedItems: [],\n      updatedItems: [],\n      mouseInSide: false,\n    });\n\n    const { adapter: adapterInject } = useBaseComponent<ToastListProps>(props, state);\n\n    function adapter_(): ToastListAdapter {\n      return {\n        ...adapterInject<ToastListProps, ToastListState>(),\n        updateToast: (list: ToastInstance[], removedItems: ToastInstance[], updatedItems: ToastInstance[]) => {\n          state.list = list;\n          state.removedItems = removedItems;\n          state.updatedItems = updatedItems;\n        },\n        handleMouseInSideChange: (mouseInSide: boolean) => {\n          state.mouseInSide = mouseInSide;\n        },\n        getInputWrapperRect: () => {\n          return innerWrapperRef.value?.getBoundingClientRect();\n        },\n      };\n    }\n\n    const handleMouseEnter = (e: MouseEvent) => {\n      if (stack.value) {\n        foundation.handleMouseInSideChange(true);\n      }\n    };\n\n    const handleMouseLeave = (e: MouseEvent) => {\n      if (stack.value) {\n        const height = foundation.getInputWrapperRect()?.height;\n        if (height) {\n          foundation.handleMouseInSideChange(false);\n        }\n      }\n    };\n\n    const adapter = adapter_();\n    const foundation = new ToastListFoundation(adapter);\n\n    function has(id: string) {\n      return foundation.hasToast(id);\n    }\n\n    function add(opts: ToastInstance) {\n      return foundation.addToast(opts);\n    }\n\n    function update(id: string, opts: ToastInstance) {\n      return foundation.updateToast(id, opts);\n    }\n\n    function remove(id: string) {\n      return foundation.removeToast(id);\n    }\n\n    function destroyAll() {\n      return foundation.destroyAll();\n    }\n\n    expose({\n      has,\n      add,\n      update,\n      remove,\n      destroyAll,\n      setStack,\n      getStack,\n    });\n\n    return () => {\n      let { list } = state;\n      const { removedItems, updatedItems } = state;\n      list = Array.from(new Set([...list, ...removedItems]));\n      const updatedIds = updatedItems.map(({ id }) => id);\n\n      const refFn = (toast) => {\n        if (toast?.foundation?._id && updatedIds.includes(toast.foundation._id)) {\n          toast.foundation.restartCloseTimer();\n        }\n      };\n\n      return (\n        <Fragment>\n          <div\n            class={cls({\n              [`${cssClasses.PREFIX}-innerWrapper`]: true,\n              [`${cssClasses.PREFIX}-innerWrapper-hover`]: state.mouseInSide,\n            })}\n            ref={innerWrapperRef}\n            onMouseenter={handleMouseEnter}\n            onMouseleave={handleMouseLeave}\n          >\n            {list.map((item, index) => {\n              const isRemoved = removedItems.find((removedItem) => removedItem.id === item.id) !== undefined;\n              return (\n                <CSSAnimation\n                  key={item.id}\n                  motion={item.motion}\n                  animationState={isRemoved ? 'leave' : 'enter'}\n                  startClassName={\n                    isRemoved ? `${cssClasses.PREFIX}-animation-hide` : `${cssClasses.PREFIX}-animation-show`\n                  }\n                  children={({ animationClassName, animationEventsNeedBind, isAnimating }) => {\n                    return isRemoved && !isAnimating ? null : (\n                      <Toast\n                        {...item}\n                        stack={stack.value}\n                        stackExpanded={state.mouseInSide}\n                        positionInList={{ length: list.length, index }}\n                        className={cls({\n                          [item.className]: Boolean(item.className),\n                          [animationClassName]: true,\n                        })}\n                        {...animationEventsNeedBind}\n                        style={{ ...item.style }}\n                        close={(id) => remove(id)}\n                        ref={refFn}\n                      />\n                    );\n                  }}\n                ></CSSAnimation>\n              );\n            })}\n          </div>\n        </Fragment>\n      );\n    };\n  },\n});\n\nexport { ToastList };\n\nconst createBaseToast = () => {\n  return ToastList;\n};\n\nexport type ToastListType = {\n  has: (id: string) => boolean;\n  add: (opts: ToastInstance) => void;\n  update: (id: string, opts: ToastInstance) => void;\n  remove: (id: string) => void;\n  destroyAll: () => void;\n  setStack: (v: boolean) => boolean;\n  getStack: () => boolean;\n};\nexport function useToastHook(configProps?: ConfigProps) {\n  let createApp_: App<Element>;\n  let ToastListRef: ToastListType;\n  const defaultOpts: ToastReactProps & { motion: Motion } = {\n    motion: true,\n    zIndex: 1010,\n    content: '',\n  };\n  let wrapperId: null | string;\n\n  configProps && config(configProps);\n\n  function create(opts: ToastReactProps) {\n    const id = opts.id ?? getUuid('toast');\n    // id = id;\n    if (!ToastListRef) {\n      const div = document.createElement('div');\n      if (!wrapperId) {\n        wrapperId = getUuid('toast-wrapper').slice(0, 26);\n      }\n      div.className = cssClasses.WRAPPER;\n      div.id = wrapperId;\n      div.style.zIndex = String(typeof opts.zIndex === 'number' ? opts.zIndex : defaultOpts.zIndex);\n      ['top', 'left', 'bottom', 'right'].map((pos) => {\n        if (pos in defaultOpts || pos in opts) {\n          const val = opts[pos] ? opts[pos] : defaultOpts[pos];\n          div.style[pos] = typeof val === 'number' ? `${val}px` : val;\n        }\n      });\n      // document.body.appendChild(div);\n      if (defaultOpts.getPopupContainer) {\n        const container = defaultOpts.getPopupContainer();\n        container.appendChild(div);\n      } else {\n        document.body.appendChild(div);\n      }\n      createApp_ = createApp(() =>\n        createVNode(ToastList, {\n          ref: (instance: any) => {\n            if (!ToastListRef) {\n              instance.add({ ...opts, id });\n              instance.setStack(Boolean(opts.stack));\n            }\n            ToastListRef = instance;\n          },\n        })\n      );\n      createApp_.mount(div);\n    } else {\n      const node = document.querySelector(`#${wrapperId}`) as HTMLElement;\n      ['top', 'left', 'bottom', 'right'].map((pos) => {\n        if (pos in opts) {\n          node.style[pos] = typeof opts[pos] === 'number' ? `${opts[pos]}px` : opts[pos];\n        }\n      });\n\n      if (Boolean(opts.stack) !== ToastListRef.getStack()) {\n        ToastListRef.setStack(Boolean(opts.stack));\n      }\n\n      if (ToastListRef.has(id)) {\n        ToastListRef.update(id, { ...opts, id });\n      } else {\n        ToastListRef.add({ ...opts, id });\n      }\n    }\n    return id;\n  }\n\n  function close(id: string) {\n    if (ToastListRef) {\n      ToastListRef.remove(id);\n    }\n  }\n\n  function destroyAll() {\n    if (ToastListRef) {\n      ToastListRef.destroyAll();\n      const wrapper = document.querySelector(`#${wrapperId}`);\n      createApp_.unmount();\n      // ReactDOM.unmountComponentAtNode(wrapper);\n      wrapper && wrapper.parentNode.removeChild(wrapper);\n      ToastListRef = null;\n      wrapperId = null;\n    }\n  }\n\n  function getWrapperId() {\n    return wrapperId;\n  }\n\n  function info(opts: Omit<ToastReactProps, 'type'> | string) {\n    if (typeof opts === 'string') {\n      opts = { content: opts };\n    }\n    return create({ ...defaultOpts, ...opts, type: 'info' });\n  }\n\n  function warning(opts: Omit<ToastReactProps, 'type'> | string) {\n    if (typeof opts === 'string') {\n      opts = { content: opts };\n    }\n    return create({ ...defaultOpts, ...opts, type: 'warning' });\n  }\n\n  function error(opts: Omit<ToastReactProps, 'type'> | string) {\n    if (typeof opts === 'string') {\n      opts = { content: opts };\n    }\n    return create({ ...defaultOpts, ...opts, type: 'error' });\n  }\n\n  function success(opts: Omit<ToastReactProps, 'type'> | string) {\n    if (typeof opts === 'string') {\n      opts = { content: opts };\n    }\n    return create({ ...defaultOpts, ...opts, type: 'success' });\n  }\n\n  function config(opts: ConfigProps) {\n    ['top', 'left', 'bottom', 'right'].forEach((pos) => {\n      if (pos in opts) {\n        defaultOpts[pos] = opts[pos];\n      }\n    });\n\n    if (typeof opts.theme === 'string' && strings.themes.includes(opts.theme)) {\n      defaultOpts.theme = opts.theme;\n    }\n    if (typeof opts.zIndex === 'number') {\n      defaultOpts.zIndex = opts.zIndex;\n    }\n    if (typeof opts.duration === 'number') {\n      defaultOpts.duration = opts.duration;\n    }\n    if (typeof opts.getPopupContainer === 'function') {\n      defaultOpts.getPopupContainer = opts.getPopupContainer;\n    }\n  }\n\n  return {\n    create,\n    close,\n    destroyAll,\n    getWrapperId,\n    info,\n    warning,\n    error,\n    success,\n    config,\n\n    useToast,\n  };\n}\n\nexport class ToastFactory {\n  static create(config?: ConfigProps): ReturnType<typeof useToastHook> {\n    return useToastHook(config);\n  }\n}\n\nexport default ToastFactory.create();\n"],"names":["ToastList","defineComponent","props","content","PropTypes","node","duration","number","onClose","func","icon","direction","String","stack","bool","name","setup","expose","useSlots","shallowRef","setStack","v","value","getStack","getCurrentInstance","innerWrapperRef","ref","state","reactive","list","removedItems","updatedItems","mouseInSide","adapter","adapterInject","useBaseComponent","adapter_","updateToast","handleMouseInSideChange","getInputWrapperRect","getBoundingClientRect","handleMouseEnter","e","foundation","handleMouseLeave","height","ToastListFoundation","has","id","hasToast","add","opts","addToast","update","remove","removeToast","destroyAll","Array","from","Set","updatedIds","map","refFn","toast","_id","includes","restartCloseTimer","_createVNode","_Fragment","cls","cssClasses","PREFIX","item","index","isRemoved","find","removedItem","undefined","CSSAnimation","motion","children","animationClassName","animationEventsNeedBind","isAnimating","Toast","_mergeProps","length","className","Boolean","style","useToastHook","configProps","createApp_","ToastListRef","defaultOpts","zIndex","wrapperId","config","create","getUuid","document","querySelector","pos","div","createElement","slice","WRAPPER","val","getPopupContainer","appendChild","body","createApp","createVNode","instance","mount","close","wrapper","unmount","parentNode","removeChild","getWrapperId","info","type","warning","error","success","forEach","theme","strings","themes","useToast","ToastFactory"],"mappings":"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"}