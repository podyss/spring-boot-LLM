{"version":3,"file":"HookToast.js","sources":["../../../src/components/toast/useToast/HookToast.tsx"],"sourcesContent":["import Toast, { propTypes } from '../toast';\nimport { ToastInstance } from '@douyinfe/semi-foundation/toast/toastFoundation';\nimport { ComponentObjectPropsOptions, defineComponent, h, onMounted, PropType, ref, useSlots, watch } from 'vue';\nimport { CombineProps } from '../../interface';\nimport { useHasInProps } from '../../_base/baseComponent';\n\ninterface HookToastProps extends ToastInstance {\n  afterClose: (id: string) => void;\n  onMyMounted: (data: {close: any})=>void\n}\n\nexport const vuePropsType: CombineProps<HookToastProps> = {\n  ...propTypes,\n  content: undefined,\n  id: String as PropType<HookToastProps['id']>,\n  motion: Boolean as PropType<HookToastProps['motion']>,\n  afterClose: {\n    type: Function as PropType<HookToastProps['afterClose']>,\n    required: true,\n  },\n  onMyMounted: {\n    type: Function as PropType<HookToastProps['onMyMounted']>,\n    required: true\n  },\n};\nconst HookToast = defineComponent({\n  props: { ...vuePropsType },\n  name: 'HookToast',\n  setup(props, { expose }) {\n    const slots = useSlots();\n    const {getProps} = useHasInProps()\n\n    const visible = ref();\n\n    const close = () => {\n      visible.value = false;\n    };\n    onMounted(()=>{\n      props.onMyMounted({\n        close: () => {\n          visible.value = false\n        }\n      })\n    })\n\n\n    watch(visible, () => {\n      if (!visible.value) {\n        props.afterClose(props.id);\n      }\n    });\n\n\n    return () => {\n      const { afterClose, ...config } = getProps(props);\n      return visible ? <Toast {...config} close={close} /> : null;\n    };\n  },\n});\n\nexport default HookToast;\n"],"names":["vuePropsType","propTypes","content","undefined","id","String","motion","Boolean","afterClose","type","Function","required","onMyMounted","HookToast","defineComponent","props","name","setup","expose","useSlots","getProps","useHasInProps","visible","ref","close","value","onMounted","watch","config","_createVNode","Toast","_mergeProps"],"mappings":";;;AAWO,MAAMA,IAA6C;AAAA,EACxD,GAAGC;AAAAA,EACHC,SAASC;AAAAA,EACTC,IAAIC;AAAAA,EACJC,QAAQC;AAAAA,EACRC,YAAY;AAAA,IACVC,MAAMC;AAAAA,IACNC,UAAU;AAAA,EACX;AAAA,EACDC,aAAa;AAAA,IACXH,MAAMC;AAAAA,IACNC,UAAU;AAAA,EACZ;AACF,GACME,IAAYC,gBAAAA,EAAgB;AAAA,EAChCC,OAAO;AAAA,IAAE,GAAGf;AAAAA,EAAc;AAAA,EAC1BgB,MAAM;AAAA,EACNC,MAAMF,GAAO;AAAA,IAAEG,QAAAA;AAAAA,EAAO,GAAG;AACTC,IAAAA,EAAU;AACxB,UAAM;AAAA,MAACC,UAAAA;AAAAA,IAAS,IAAGC,EAAa,GAE1BC,IAAUC,KAEVC,IAAQA,MAAM;AAClBF,MAAAA,EAAQG,QAAQ;AAAA;AAElBC,WAAAA,EAAU,MAAI;AACZX,MAAAA,EAAMH,YAAY;AAAA,QAChBY,OAAOA,MAAM;AACXF,UAAAA,EAAQG,QAAQ;AAAA,QAClB;AAAA,MACF,CAAC;AAAA,IACH,CAAC,GAGDE,EAAML,GAAS,MAAM;AACnB,MAAKA,EAAQG,SACXV,EAAMP,WAAWO,EAAMX,EAAE;AAAA,IAE7B,CAAC,GAGM,MAAM;AACX,YAAM;AAAA,QAAEI,YAAAA;AAAAA,QAAY,GAAGoB;AAAAA,MAAO,IAAIR,EAASL,CAAK;AAChD,aAAOO,IAAOO,EAAAC,GAAAC,EAAcH,GAAM;AAAA,QAAA,OAASJ;AAAAA,MAAK,CAAA,GAAA,IAAA,IAAO;AAAA;EAE3D;AACF,CAAC;"}