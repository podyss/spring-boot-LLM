{"version":3,"file":"previewFooter.js","sources":["../../src/components/image/previewFooter.tsx"],"sourcesContent":["import {\n  IconChevronLeft,\n  IconChevronRight,\n  IconMinus,\n  IconPlus,\n  IconRotate,\n  IconDownload,\n  IconWindowAdaptionStroked,\n  IconRealSizeStroked,\n} from '@kousum/semi-icons-vue';\nimport type { IconSize } from '@kousum/semi-icons-vue';\nimport { FooterProps } from './interface';\nimport * as PropTypes from '../PropTypes';\nimport Tooltip from '../tooltip';\nimport Divider from '../divider';\nimport Slider from '../slider';\nimport { cssClasses } from '@douyinfe/semi-foundation/image/constants';\nimport cls from 'classnames';\nimport PreviewFooterFoundation, { PreviewFooterAdapter } from '@douyinfe/semi-foundation/image/previewFooterFoundation';\nimport { LocaleConsumerFunc } from '../locale/localeConsumer';\nimport { Locale } from '../locale/interface';\nimport { throttle } from 'lodash';\nimport { ComponentObjectPropsOptions, defineComponent, h, PropType, useSlots } from 'vue';\nimport { useBaseComponent } from '../_base/baseComponent';\nimport { CombineProps, VueJsxNode } from '../interface';\nimport { vuePropsMake } from '../PropTypes';\n\nconst prefixCls = cssClasses.PREFIX;\nconst footerPrefixCls = `${cssClasses.PREFIX}-preview-footer`;\nconst LocaleConsumer = LocaleConsumerFunc<Locale['Image']>();\n\nconst propTypes: CombineProps<FooterProps> = {\n  curPage: PropTypes.number,\n  totalNum: PropTypes.number,\n  disabledPrev: PropTypes.bool,\n  disabledNext: PropTypes.bool,\n  disableDownload: PropTypes.bool,\n  className: PropTypes.string,\n  zoom: PropTypes.number,\n  ratio: PropTypes.string as PropType<FooterProps['ratio']>,\n  prevTip: PropTypes.string,\n  nextTip: PropTypes.string,\n  zoomInTip: PropTypes.string,\n  zoomOutTip: PropTypes.string,\n  rotateTip: PropTypes.string,\n  downloadTip: PropTypes.string,\n  adaptiveTip: PropTypes.string,\n  originTip: PropTypes.string,\n  showTooltip: PropTypes.bool,\n  onZoomIn: PropTypes.func as PropType<FooterProps['onZoomIn']>,\n  onZoomOut: PropTypes.func as PropType<FooterProps['onZoomOut']>,\n  onPrev: PropTypes.func as PropType<FooterProps['onPrev']>,\n  onNext: PropTypes.func as PropType<FooterProps['onNext']>,\n  onAdjustRatio: PropTypes.func as PropType<FooterProps['onAdjustRatio']>,\n  // onRotateLeft: PropTypes.func,\n  onDownload: PropTypes.func as PropType<FooterProps['onDownload']>,\n\n  min: PropTypes.number,\n  max: PropTypes.number,\n  step: PropTypes.number,\n  onRotate: PropTypes.func as PropType<FooterProps['onRotate']>,\n  renderPreviewMenu: PropTypes.func as PropType<FooterProps['renderPreviewMenu']>,\n  forwardRef: PropTypes.object as PropType<FooterProps['forwardRef']>,\n  zIndex: PropTypes.number,\n};\n\nconst defaultProps = {\n  min: 10,\n  max: 500,\n  step: 10,\n  showTooltip: false,\n  disableDownload: false,\n};\nexport const vuePropsType = vuePropsMake<FooterProps>(propTypes, defaultProps);\nconst Footer = defineComponent({\n  props: { ...vuePropsType },\n  name: 'Footer',\n  setup(props, {}) {\n    const slots = useSlots();\n\n    const { adapter: adapterInject } = useBaseComponent<FooterProps>(props, {});\n    function adapter_(): PreviewFooterAdapter<FooterProps> {\n      return {\n        ...adapterInject(),\n      };\n    }\n    const adapter = adapter_();\n    const foundation = new PreviewFooterFoundation(adapter);\n\n    const changeSliderValue = (type: string): void => {\n      foundation.changeSliderValue(type);\n    };\n\n    const handleMinusClick = () => {\n      changeSliderValue('minus');\n    };\n\n    const handlePlusClick = () => {\n      changeSliderValue('plus');\n    };\n\n    const handleRotateLeft = () => {\n      foundation.handleRotate('left');\n    };\n\n    const handleRotateRight = () => {\n      foundation.handleRotate('right');\n    };\n\n    const handleSlideChange = throttle((value): void => {\n      foundation.handleValueChange(value);\n    }, 50);\n\n    const handleRatioClick = (): void => {\n      foundation.handleRatioClick();\n    };\n\n    const customRenderViewMenu = (): VueJsxNode => {\n      const {\n        min,\n        max,\n        step,\n        curPage,\n        totalNum,\n        ratio,\n        zoom,\n        disabledPrev,\n        disabledNext,\n        disableDownload,\n        onNext,\n        onPrev,\n        onDownload,\n        renderPreviewMenu,\n      } = props;\n\n      const props_ = {\n        min,\n        max,\n        step,\n        curPage,\n        totalNum,\n        ratio,\n        zoom,\n        disabledPrev,\n        disabledNext,\n        disableDownload,\n        onNext,\n        onPrev,\n        onDownload,\n        onRotateLeft: handleRotateLeft,\n        onRotateRight: handleRotateRight,\n        disabledZoomIn: zoom === max,\n        disabledZoomOut: zoom === min,\n        onRatioClick: handleRatioClick,\n        onZoomIn: handlePlusClick,\n        onZoomOut: handleMinusClick,\n        menuItems: getMenu(),\n      };\n      return renderPreviewMenu(props_);\n    };\n\n    // According to showTooltip in props, decide whether to use Tooltip to pack a layer\n    // 根据 props 中的 showTooltip 决定是否使用 Tooltip 包一层\n    const getFinalIconElement = (element: VueJsxNode, content: VueJsxNode, key: string) => {\n      const { showTooltip, zIndex } = props;\n      return showTooltip ? (\n        <Tooltip content={content} key={`tooltip-${key}`} zIndex={zIndex + 1}>\n          {element}\n        </Tooltip>\n      ) : (\n        element\n      );\n    };\n\n    const getLocalTextByKey = (key: string) => (\n      <LocaleConsumer componentName=\"Image\">{(locale: Locale['Image']) => locale[key]}</LocaleConsumer>\n    );\n\n    const getIconChevronLeft = () => {\n      const { disabledPrev, onPrev, prevTip } = props;\n      const icon = (\n        <IconChevronLeft\n          key=\"chevron-left\"\n          role={'prev_bt'}\n          size=\"large\"\n          className={disabledPrev ? `${footerPrefixCls}-disabled` : ''}\n          onClick={!disabledPrev ? onPrev : undefined}\n        />\n      );\n      const content = prevTip ?? getLocalTextByKey('prevTip');\n      return getFinalIconElement(icon, content, 'chevron-left');\n    };\n\n    const getIconChevronRight = () => {\n      const { disabledNext, onNext, nextTip } = props;\n      const icon = (\n        <IconChevronRight\n          key=\"chevron-right\"\n          role={'next_bt'}\n          size=\"large\"\n          className={disabledNext ? `${footerPrefixCls}-disabled` : ''}\n          onClick={!disabledNext ? onNext : undefined}\n        />\n      );\n      const content = nextTip ?? getLocalTextByKey('nextTip');\n      return getFinalIconElement(icon, content, 'chevron-right');\n    };\n\n    const getIconMinus = () => {\n      const { zoomOutTip, zoom, min } = props;\n      const disabledZoomOut = zoom === min;\n      const icon = (\n        <IconMinus\n          key=\"minus\"\n          role={'minus_bt'}\n          size=\"large\"\n          onClick={!disabledZoomOut ? handleMinusClick : undefined}\n          className={disabledZoomOut ? `${footerPrefixCls}-disabled` : ''}\n        />\n      );\n      const content = zoomOutTip ?? getLocalTextByKey('zoomOutTip');\n      return getFinalIconElement(icon, content, 'minus');\n    };\n\n    const getIconPlus = () => {\n      const { zoomInTip, zoom, max } = props;\n      const disabledZoomIn = zoom === max;\n      const icon = (\n        <IconPlus\n          key=\"plus\"\n          role={'plus_bt'}\n          size=\"large\"\n          onClick={!disabledZoomIn ? handlePlusClick : undefined}\n          className={disabledZoomIn ? `${footerPrefixCls}-disabled` : ''}\n        />\n      );\n      const content = zoomInTip ?? getLocalTextByKey('zoomInTip');\n      return getFinalIconElement(icon, content, 'plus');\n    };\n\n    const getIconRatio = () => {\n      const { ratio, originTip, adaptiveTip } = props;\n      const props_ = {\n        key: 'ratio',\n        size: 'large' as IconSize,\n        className: cls(`${footerPrefixCls}-gap`),\n        onClick: handleRatioClick,\n      };\n      const icon =\n        ratio === 'adaptation' ? <IconRealSizeStroked {...props_} /> : <IconWindowAdaptionStroked {...props_} />;\n      let content: any;\n      if (ratio === 'adaptation') {\n        content = originTip ?? getLocalTextByKey('originTip');\n      } else {\n        content = adaptiveTip ?? getLocalTextByKey('adaptiveTip');\n      }\n      return getFinalIconElement(icon, content, 'ratio');\n    };\n\n    const getIconRotate = () => {\n      const { rotateTip } = props;\n      const icon = <IconRotate key=\"rotate\" role={'rotate_bt'} size=\"large\" onClick={handleRotateLeft} />;\n      const content = rotateTip ?? getLocalTextByKey('rotateTip');\n      return getFinalIconElement(icon, content, 'rotate');\n    };\n\n    const getIconDownload = () => {\n      const { downloadTip, onDownload, disableDownload } = props;\n      const icon = (\n        <IconDownload\n          key=\"download\"\n          role={'download_bt'}\n          size=\"large\"\n          onClick={!disableDownload ? onDownload : undefined}\n          className={cls(`${footerPrefixCls}-gap`, {\n            [`${footerPrefixCls}-disabled`]: disableDownload,\n          })}\n        />\n      );\n      const content = downloadTip ?? getLocalTextByKey('downloadTip');\n      return getFinalIconElement(icon, content, 'download');\n    };\n\n    const getNumberInfo = () => {\n      const { curPage, totalNum } = props;\n      return (\n        <div class={`${footerPrefixCls}-page`} key={'info'}>\n          {curPage}/{totalNum}\n        </div>\n      );\n    };\n\n    const getSlider = () => {\n      const { zoom, min, max, step, showTooltip } = props;\n      return (\n        <Slider\n          key={'slider'}\n          value={zoom}\n          min={min}\n          max={max}\n          step={step}\n          tipFormatter={(v): string => `${v}%`}\n          tooltipVisible={showTooltip ? undefined : false}\n          onChange={handleSlideChange}\n        />\n      );\n    };\n\n    const getMenu = () => [\n      getIconChevronLeft(),\n      getNumberInfo(),\n      getIconChevronRight(),\n      getIconMinus(),\n      getSlider(),\n      getIconPlus(),\n      getIconRatio(),\n      getIconRotate(),\n      getIconDownload(),\n    ];\n\n    const getFooterMenu = () => {\n      const menuItems = getMenu();\n      menuItems.splice(3, 0, <Divider layout=\"vertical\" key={'divider-first'} />);\n      menuItems.splice(8, 0, <Divider layout=\"vertical\" key={'divider-second'} />);\n      return menuItems;\n    };\n\n    return () => {\n      const { className, renderPreviewMenu, forwardRef } = props;\n\n      const menuCls = cls(footerPrefixCls, `${footerPrefixCls}-wrapper`, className, {\n        [`${footerPrefixCls}-content`]: !Boolean(renderPreviewMenu),\n      });\n      return (\n        <section class={menuCls} ref={forwardRef}>\n          {renderPreviewMenu ? customRenderViewMenu() : getFooterMenu()}\n        </section>\n      );\n    };\n  },\n});\n\nexport default Footer;\n"],"names":["_isSlot","s","Object","prototype","toString","call","_isVNode","cssClasses","PREFIX","footerPrefixCls","LocaleConsumer","LocaleConsumerFunc","propTypes","curPage","PropTypes","number","totalNum","disabledPrev","bool","disabledNext","disableDownload","className","string","zoom","ratio","prevTip","nextTip","zoomInTip","zoomOutTip","rotateTip","downloadTip","adaptiveTip","originTip","showTooltip","onZoomIn","func","onZoomOut","onPrev","onNext","onAdjustRatio","onDownload","min","max","step","onRotate","renderPreviewMenu","forwardRef","object","zIndex","defaultProps","vuePropsType","vuePropsMake","Footer","defineComponent","props","name","setup","useSlots","adapter","adapterInject","useBaseComponent","adapter_","foundation","PreviewFooterFoundation","changeSliderValue","type","handleMinusClick","handlePlusClick","handleRotateLeft","handleRotate","handleRotateRight","handleSlideChange","throttle","value","handleValueChange","handleRatioClick","customRenderViewMenu","props_","onRotateLeft","onRotateRight","disabledZoomIn","disabledZoomOut","onRatioClick","menuItems","getMenu","getFinalIconElement","element","content","key","_createVNode","Tooltip","default","getLocalTextByKey","locale","getIconChevronLeft","icon","IconChevronLeft","undefined","getIconChevronRight","IconChevronRight","getIconMinus","IconMinus","getIconPlus","IconPlus","getIconRatio","size","cls","onClick","IconRealSizeStroked","IconWindowAdaptionStroked","getIconRotate","IconRotate","getIconDownload","IconDownload","getNumberInfo","_createTextVNode","getSlider","Slider","v","getFooterMenu","splice","Divider","menuCls"],"mappings":"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"}