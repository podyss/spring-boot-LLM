{"version":3,"file":"index.js","sources":["../../src/components/popconfirm/index.tsx"],"sourcesContent":["import cls from 'classnames';\nimport * as PropTypes from '../PropTypes';\nimport { noop, get, isFunction, omit } from 'lodash';\nimport { cssClasses, numbers } from '@douyinfe/semi-foundation/popconfirm/constants';\nimport PopconfirmFoundation, { PopconfirmAdapter } from '@douyinfe/semi-foundation/popconfirm/popconfirmFoundation';\nimport { IconClose, IconAlertTriangle } from '@kousum/semi-icons-vue';\nimport Popover, { PopoverProps } from '../popover';\nimport { vuePropsType as popoverVuePropsType } from '../popover';\n\nimport { Position, Trigger, RenderContentProps } from '../tooltip';\nimport Button, { ButtonProps } from '../button';\nimport { Type as ButtonType } from '../button/Button';\nimport LocaleConsumer from '../locale/localeConsumer';\nimport { Locale as LocaleObject } from '../locale/interface';\nimport '@douyinfe/semi-foundation/popconfirm/popconfirm.scss';\nimport { Motion } from '../_base/base';\nimport {\n  defineComponent,\n  h,\n  reactive,\n  useSlots,\n  Fragment,\n  isVNode,\n  watch,\n  ref,\n  ComponentObjectPropsOptions,\n  PropType,\n} from 'vue';\nimport { CombineProps, VueJsxNode } from '../interface';\nimport { vuePropsMake } from '../PropTypes';\nimport { useConfigContext } from '../configProvider/context/Consumer';\nimport { useBaseComponent, useHasInProps } from '../_base/baseComponent';\nimport { RatingProps } from '../rating';\n\nexport interface PopconfirmProps extends PopoverProps {\n  cancelText?: string;\n  cancelButtonProps?: ButtonProps;\n  cancelType?: ButtonType;\n  // content?: VueJsxNode;\n  defaultVisible?: boolean;\n  disabled?: boolean;\n  icon?: VueJsxNode;\n  okText?: string;\n  okType?: ButtonType;\n  okButtonProps?: ButtonProps;\n  motion?: Motion;\n  title?: VueJsxNode;\n  visible?: boolean;\n  prefixCls?: string;\n  zIndex?: number;\n  trigger?: Trigger;\n  showCloseIcon?: boolean;\n  position?: Position;\n  onCancel?: (e: MouseEvent) => Promise<any> | void;\n  onConfirm?: (e: MouseEvent) => Promise<any> | void;\n  onVisibleChange?: (visible: boolean) => void;\n  onClickOutSide?: (e: MouseEvent) => void;\n}\n\nexport interface PopconfirmState {\n  visible: boolean;\n  cancelLoading: boolean;\n  confirmLoading: boolean;\n}\n\ninterface PopProps {\n  [x: string]: any;\n}\n\nconst propTypes: CombineProps<PopconfirmProps> = {\n  ...popoverVuePropsType,\n  motion: PropTypes.oneOfType([PropTypes.bool, PropTypes.func, PropTypes.object]),\n  disabled: PropTypes.bool,\n  content: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n  title: PropTypes.any as PropType<PopconfirmProps['title']>,\n  prefixCls: PropTypes.string,\n  className: PropTypes.string,\n  style: PropTypes.object,\n  icon: PropTypes.oneOfType([PropTypes.string, PropTypes.node]),\n  okText: PropTypes.string,\n  okType: PropTypes.string as PropType<PopconfirmProps['okType']>,\n  cancelText: PropTypes.string,\n  cancelType: PropTypes.string as PropType<PopconfirmProps['cancelType']>,\n  onCancel: PropTypes.func as PropType<PopconfirmProps['onCancel']>,\n  onConfirm: PropTypes.func as PropType<PopconfirmProps['onConfirm']>,\n  onClickOutSide: PropTypes.func as PropType<PopconfirmProps['onClickOutSide']>,\n  onVisibleChange: PropTypes.func as PropType<PopconfirmProps['onVisibleChange']>,\n  visible: PropTypes.bool,\n  defaultVisible: PropTypes.bool,\n  okButtonProps: PropTypes.object,\n  cancelButtonProps: PropTypes.object,\n  stopPropagation: PropTypes.oneOfType([PropTypes.bool, PropTypes.string]),\n  showCloseIcon: PropTypes.bool,\n  zIndex: PropTypes.number,\n  // private\n  trigger: PropTypes.string as PropType<PopconfirmProps['trigger']>,\n  position: PropTypes.string as PropType<PopconfirmProps['position']>,\n};\nconst defaultProps = {\n  stopPropagation: true,\n  trigger: 'click',\n  // position: 'bottomLeft',\n  onVisibleChange: noop,\n  disabled: false,\n  icon: <IconAlertTriangle size=\"extra-large\" />,\n  okType: 'primary',\n  cancelType: 'tertiary',\n  prefixCls: cssClasses.PREFIX,\n  zIndex: numbers.DEFAULT_Z_INDEX,\n  showCloseIcon: true,\n  onCancel: noop,\n  onConfirm: noop,\n  onClickOutSide: noop,\n};\nexport const vuePropsType = vuePropsMake(propTypes, defaultProps);\nconst Popconfirm = defineComponent({\n  props: { ...vuePropsType },\n  name: 'Popconfirm',\n  setup(props, {}) {\n    const slots = useSlots();\n    const { getProps } = useHasInProps();\n\n    const { context } = useConfigContext();\n    const state = reactive<PopconfirmState>({\n      cancelLoading: false,\n      confirmLoading: false,\n      visible: props.defaultVisible || false,\n    });\n\n    const footerRef = ref();\n    const popoverRef = ref();\n    const { adapter: adapterInject, isControlled } = useBaseComponent<RatingProps>(props, state);\n    function adapter_(): PopconfirmAdapter<PopconfirmProps, PopconfirmState> {\n      return {\n        ...adapterInject<PopconfirmProps, PopconfirmState>(),\n        setVisible: (visible: boolean): void => {\n          state.visible = visible;\n        },\n        updateConfirmLoading: (loading: boolean): void => {\n          state.confirmLoading = loading;\n        },\n        updateCancelLoading: (loading: boolean): void => {\n          state.cancelLoading = loading;\n        },\n        notifyConfirm: (e: MouseEvent): Promise<any> | void => props.onConfirm(e),\n        notifyCancel: (e: MouseEvent): Promise<any> | void => props.onCancel(e),\n        notifyVisibleChange: (visible: boolean): void => props.onVisibleChange(visible),\n        notifyClickOutSide: (e: MouseEvent) => props.onClickOutSide(e),\n        focusCancelButton: () => {\n          const buttonNode = footerRef.value?.querySelector('[data-type=cancel]') as HTMLElement;\n          buttonNode?.focus({ preventScroll: true });\n        },\n        focusOkButton: () => {\n          const buttonNode = footerRef.value?.querySelector('[data-type=ok]') as HTMLElement;\n          buttonNode?.focus({ preventScroll: true });\n        },\n        focusPrevFocusElement: () => {\n          popoverRef.value?.focusTrigger();\n        },\n      };\n    }\n    const adapter = adapter_();\n    const foundation = new PopconfirmFoundation(adapter);\n\n    function getDerivedStateFromProps(props: PopconfirmProps, state: PopconfirmState) {\n      const willUpdateStates: Partial<PopconfirmState> = {};\n      const { hasOwnProperty } = Object.prototype;\n\n      if (hasOwnProperty.call(props, 'visible')) {\n        willUpdateStates.visible = props.visible;\n      }\n\n      return willUpdateStates;\n    }\n\n    watch(\n      () => props.visible,\n      (val) => {\n        const newState = getDerivedStateFromProps({ ...props }, { ...state });\n        if (newState) {\n          Object.keys(newState).forEach((key) => {\n            state[key] = newState[key];\n          });\n        }\n      },\n      { immediate: true }\n    );\n\n    const handleCancel = (e: MouseEvent): void => foundation.handleCancel(e);\n\n    const handleConfirm = (e: MouseEvent): void => foundation.handleConfirm(e);\n\n    const handleVisibleChange = (visible: boolean): void => foundation.handleVisibleChange(visible);\n\n    const handleClickOutSide = (e: MouseEvent) => foundation.handleClickOutSide(e);\n\n    const stopImmediatePropagation = (e: any): void => e && e.nativeEvent && e.nativeEvent.stopImmediatePropagation();\n\n    function renderControls() {\n      const { okText, cancelText, okType, cancelType, cancelButtonProps, okButtonProps } = props;\n      const { cancelLoading, confirmLoading } = state;\n      return (\n        <LocaleConsumer componentName=\"Popconfirm\">\n          {(locale: LocaleObject['Popconfirm'], localeCode: string) => (\n            <>\n              <Button\n                data-type=\"cancel\"\n                type={cancelType}\n                onClick={handleCancel}\n                loading={cancelLoading}\n                {...omit(cancelButtonProps, 'autoFocus')}\n              >\n                {cancelText || get(locale, 'cancel')}\n              </Button>\n              <Button\n                data-type=\"ok\"\n                type={okType}\n                theme=\"solid\"\n                onClick={handleConfirm}\n                loading={confirmLoading}\n                {...omit(okButtonProps, 'autoFocus')}\n              >\n                {okText || get(locale, 'confirm')}\n              </Button>\n            </>\n          )}\n        </LocaleConsumer>\n      );\n    }\n\n    function renderConfirmPopCard({ initialFocusRef }: { initialFocusRef?: RenderContentProps['initialFocusRef'] }) {\n      const { content, title, className, style, cancelType, icon, prefixCls, showCloseIcon } = props;\n      const { direction } = context.value;\n      const popCardCls = cls(prefixCls, className, {\n        [`${prefixCls}-rtl`]: direction === 'rtl',\n      });\n      const showTitle = title !== null && typeof title !== 'undefined';\n      const showContent = !(content === null || typeof content === 'undefined');\n\n      const hasIcon = isVNode(icon);\n      const bodyCls = cls({\n        [`${prefixCls}-body`]: true,\n        [`${prefixCls}-body-withIcon`]: hasIcon,\n      });\n      return (\n        // eslint-disable-next-line jsx-a11y/click-events-have-key-events, jsx-a11y/no-static-element-interactions\n        <div class={popCardCls} onClick={stopImmediatePropagation} style={style}>\n          <div class={`${prefixCls}-inner`}>\n            <div class={`${prefixCls}-header`}>\n              {hasIcon ? (\n                <i class={`${prefixCls}-header-icon`} x-semi-prop=\"icon\">\n                  {icon}\n                </i>\n              ) : null}\n              <div class={`${prefixCls}-header-body`}>\n                {showTitle ? (\n                  <div class={`${prefixCls}-header-title`} x-semi-prop=\"title\">\n                    {title}\n                  </div>\n                ) : null}\n              </div>\n              {showCloseIcon ? (\n                <Button\n                  className={`${prefixCls}-btn-close`}\n                  icon={<IconClose />}\n                  size=\"small\"\n                  theme={'borderless'}\n                  type={cancelType}\n                  onClick={handleCancel}\n                />\n              ) : null}\n            </div>\n            {showContent ? (\n              <div class={bodyCls} x-semi-prop=\"content\">\n                {isFunction(content) ? content({ initialFocusRef }) : content}\n              </div>\n            ) : null}\n            <div class={`${prefixCls}-footer`} ref={footerRef}>\n              {renderControls()}\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    return () => {\n      // rtl changes the default position\n      const { direction } = context.value;\n      const defaultPosition = direction === 'rtl' ? 'bottomRight' : 'bottomLeft';\n      const children = slots.default?.();\n      const {\n        className,\n        prefixCls,\n        disabled,\n        style,\n        position = defaultPosition,\n        title,\n        icon,\n        okType,\n        cancelType,\n        defaultVisible,\n        okButtonProps,\n        cancelButtonProps,\n        onCancel,\n        onConfirm,\n        showCloseIcon,\n        ...attrs\n      } = getProps(props);\n\n      if (disabled) {\n        return children;\n      }\n\n      const { visible } = state;\n      const popProps: PopProps = {\n        onVisibleChange: handleVisibleChange,\n        className: cssClasses.POPOVER,\n        onClickOutSide: handleClickOutSide,\n      };\n\n      if (isControlled('visible')) {\n        popProps.trigger = 'custom';\n      }\n\n      return (\n        <Popover\n          ref={popoverRef}\n          {...{\n            ...attrs, // A arrow function needs to be passed here, otherwise the content will not be updated after the Popconfirm state is updated\n            // Popover is a PureComponent, same props will not trigger update\n            content: ({ initialFocusRef }) => renderConfirmPopCard({ initialFocusRef }),\n            visible: visible,\n            position: position,\n            ...popProps,\n          }}\n        >\n          {{\n            default: slots.default,\n          }}\n        </Popover>\n      );\n    };\n  },\n});\n\nexport default Popconfirm;\n"],"names":["propTypes","popoverVuePropsType","motion","PropTypes","oneOfType","bool","func","object","disabled","content","node","title","any","prefixCls","string","className","style","icon","okText","okType","cancelText","cancelType","onCancel","onConfirm","onClickOutSide","onVisibleChange","visible","defaultVisible","okButtonProps","cancelButtonProps","stopPropagation","showCloseIcon","zIndex","number","trigger","position","defaultProps","noop","_createVNode","IconAlertTriangle","cssClasses","PREFIX","numbers","DEFAULT_Z_INDEX","vuePropsType","vuePropsMake","Popconfirm","defineComponent","props","name","setup","slots","useSlots","getProps","useHasInProps","context","useConfigContext","state","reactive","cancelLoading","confirmLoading","footerRef","ref","popoverRef","adapter","adapterInject","isControlled","useBaseComponent","adapter_","setVisible","updateConfirmLoading","loading","updateCancelLoading","notifyConfirm","e","notifyCancel","notifyVisibleChange","notifyClickOutSide","focusCancelButton","buttonNode","value","querySelector","focus","preventScroll","focusOkButton","focusPrevFocusElement","focusTrigger","foundation","PopconfirmFoundation","getDerivedStateFromProps","willUpdateStates","hasOwnProperty","Object","prototype","call","watch","val","newState","keys","forEach","key","immediate","handleCancel","handleConfirm","handleVisibleChange","handleClickOutSide","stopImmediatePropagation","nativeEvent","renderControls","LocaleConsumer","default","locale","localeCode","_Fragment","Button","_mergeProps","omit","get","renderConfirmPopCard","initialFocusRef","direction","popCardCls","cls","showTitle","showContent","hasIcon","isVNode","bodyCls","IconClose","isFunction","defaultPosition","children","attrs","popProps","POPOVER","Popover"],"mappings":";;;;;;;;;;;;;;AAqEA,MAAMA,KAA2C;AAAA,EAC/C,GAAGC;AAAAA,EACHC,QAAQC,EAAUC,UAAU,CAACD,EAAUE,MAAMF,EAAUG,MAAMH,EAAUI,MAAM,CAAC;AAAA,EAC9EC,UAAUL,EAAUE;AAAAA,EACpBI,SAASN,EAAUC,UAAU,CAACD,EAAUO,MAAMP,EAAUG,IAAI,CAAC;AAAA,EAC7DK,OAAOR,EAAUS;AAAAA,EACjBC,WAAWV,EAAUW;AAAAA,EACrBC,WAAWZ,EAAUW;AAAAA,EACrBE,OAAOb,EAAUI;AAAAA,EACjBU,MAAMd,EAAUC,UAAU,CAACD,EAAUW,QAAQX,EAAUO,IAAI,CAAC;AAAA,EAC5DQ,QAAQf,EAAUW;AAAAA,EAClBK,QAAQhB,EAAUW;AAAAA,EAClBM,YAAYjB,EAAUW;AAAAA,EACtBO,YAAYlB,EAAUW;AAAAA,EACtBQ,UAAUnB,EAAUG;AAAAA,EACpBiB,WAAWpB,EAAUG;AAAAA,EACrBkB,gBAAgBrB,EAAUG;AAAAA,EAC1BmB,iBAAiBtB,EAAUG;AAAAA,EAC3BoB,SAASvB,EAAUE;AAAAA,EACnBsB,gBAAgBxB,EAAUE;AAAAA,EAC1BuB,eAAezB,EAAUI;AAAAA,EACzBsB,mBAAmB1B,EAAUI;AAAAA,EAC7BuB,iBAAiB3B,EAAUC,UAAU,CAACD,EAAUE,MAAMF,EAAUW,MAAM,CAAC;AAAA,EACvEiB,eAAe5B,EAAUE;AAAAA,EACzB2B,QAAQ7B,EAAU8B;AAAAA;AAAAA,EAElBC,SAAS/B,EAAUW;AAAAA,EACnBqB,UAAUhC,EAAUW;AACtB,GACMsB,KAAe;AAAA,EACnBN,iBAAiB;AAAA,EACjBI,SAAS;AAAA;AAAA,EAETT,iBAAiBY;AAAAA,EACjB7B,UAAU;AAAA,EACVS,MAAIqB,EAAAC,IAAA;AAAA,IAAA,MAAA;AAAA,EAA0C,GAAA,IAAA;AAAA,EAC9CpB,QAAQ;AAAA,EACRE,YAAY;AAAA,EACZR,WAAW2B,EAAWC;AAAAA,EACtBT,QAAQU,GAAQC;AAAAA,EAChBZ,eAAe;AAAA,EACfT,UAAUe;AAAAA,EACVd,WAAWc;AAAAA,EACXb,gBAAgBa;AAClB,GACaO,KAAeC,GAAa7C,IAAWoC,EAAY,GAC1DU,KAAaC,gBAAAA,EAAgB;AAAA,EACjCC,OAAO;AAAA,IAAE,GAAGJ;AAAAA,EAAc;AAAA,EAC1BK,MAAM;AAAA,EACNC,MAAMF,GAAO,IAAI;AACf,UAAMG,IAAQC,KACR;AAAA,MAAEC,UAAAA;AAAAA,IAAU,IAAGC,GAAa,GAE5B;AAAA,MAAEC,SAAAA;AAAAA,IAAS,IAAGC,GAAgB,GAC9BC,IAAQC,EAA0B;AAAA,MACtCC,eAAe;AAAA,MACfC,gBAAgB;AAAA,MAChBlC,SAASsB,EAAMrB,kBAAkB;AAAA,IACnC,CAAC,GAEKkC,IAAYC,KACZC,IAAaD,KACb;AAAA,MAAEE,SAASC;AAAAA,MAAeC,cAAAA;AAAAA,IAAa,IAAIC,GAA8BnB,GAAOS,CAAK;AAC3F,aAASW,IAAgE;AACvE,aAAO;AAAA,QACL,GAAGH,EAAiD;AAAA,QACpDI,YAAa3C,CAAAA,MAA2B;AACtC+B,UAAAA,EAAM/B,UAAUA;AAAAA,QACjB;AAAA,QACD4C,sBAAuBC,CAAAA,MAA2B;AAChDd,UAAAA,EAAMG,iBAAiBW;AAAAA,QACxB;AAAA,QACDC,qBAAsBD,CAAAA,MAA2B;AAC/Cd,UAAAA,EAAME,gBAAgBY;AAAAA,QACvB;AAAA,QACDE,eAAgBC,OAAuC1B,EAAMzB,UAAUmD,CAAC;AAAA,QACxEC,cAAeD,OAAuC1B,EAAM1B,SAASoD,CAAC;AAAA,QACtEE,qBAAsBlD,CAAAA,MAA2BsB,EAAMvB,gBAAgBC,CAAO;AAAA,QAC9EmD,oBAAqBH,OAAkB1B,EAAMxB,eAAekD,CAAC;AAAA,QAC7DI,mBAAmBA,MAAM;;AACvB,gBAAMC,KAAalB,IAAAA,EAAUmB,UAAVnB,gBAAAA,EAAiBoB,cAAc;AAClDF,UAAAA,KAAAA,QAAAA,EAAYG,MAAM;AAAA,YAAEC,eAAe;AAAA,UAAK;AAAA,QACzC;AAAA,QACDC,eAAeA,MAAM;;AACnB,gBAAML,KAAalB,IAAAA,EAAUmB,UAAVnB,gBAAAA,EAAiBoB,cAAc;AAClDF,UAAAA,KAAAA,QAAAA,EAAYG,MAAM;AAAA,YAAEC,eAAe;AAAA,UAAK;AAAA,QACzC;AAAA,QACDE,uBAAuBA,MAAM;;AAC3BtB,WAAAA,IAAAA,EAAWiB,UAAXjB,QAAAA,EAAkBuB;AAAAA,QACpB;AAAA;IAEJ;AACA,UAAMtB,IAAUI,KACVmB,IAAa,IAAIC,GAAqBxB,CAAO;AAEnD,aAASyB,EAAyBzC,GAAwBS,GAAwB;AAChF,YAAMiC,IAA6C,CAAA,GAC7C;AAAA,QAAEC,gBAAAA;AAAAA,UAAmBC,OAAOC;AAElC,aAAIF,EAAeG,KAAK9C,GAAO,SAAS,MACtC0C,EAAiBhE,UAAUsB,EAAMtB,UAG5BgE;AAAAA,IACT;AAEAK,IAAAA,EACE,MAAM/C,EAAMtB,SACXsE,CAAAA,MAAQ;AACP,YAAMC,IAAWR,EAAyB;AAAA,QAAE,GAAGzC;AAAAA,MAAM,GAAG;AAAA,QAAE,GAAGS;AAAAA,MAAM,CAAC;AACpE,MAAIwC,KACFL,OAAOM,KAAKD,CAAQ,EAAEE,QAASC,CAAAA,MAAQ;AACrC3C,QAAAA,EAAM2C,CAAG,IAAIH,EAASG,CAAG;AAAA,MAC3B,CAAC;AAAA,IAEL,GACA;AAAA,MAAEC,WAAW;AAAA,IAAK,CACpB;AAEA,UAAMC,IAAgB5B,OAAwBa,EAAWe,aAAa5B,CAAC,GAEjE6B,IAAiB7B,OAAwBa,EAAWgB,cAAc7B,CAAC,GAEnE8B,IAAuB9E,CAAAA,MAA2B6D,EAAWiB,oBAAoB9E,CAAO,GAExF+E,IAAsB/B,OAAkBa,EAAWkB,mBAAmB/B,CAAC,GAEvEgC,IAA4BhC,OAAiBA,KAAKA,EAAEiC,eAAejC,EAAEiC,YAAYD;AAEvF,aAASE,IAAiB;AACxB,YAAM;AAAA,QAAE1F,QAAAA;AAAAA,QAAQE,YAAAA;AAAAA,QAAYD,QAAAA;AAAAA,QAAQE,YAAAA;AAAAA,QAAYQ,mBAAAA;AAAAA,QAAmBD,eAAAA;AAAAA,MAAe,IAAGoB,GAC/E;AAAA,QAAEW,eAAAA;AAAAA,QAAeC,gBAAAA;AAAAA,MAAgB,IAAGH;AAC1C,aAAAnB,EAAAuE,IAAA;AAAA,QAAA,eAAA;AAAA,MAAA,GAAA;AAAA,QAAAC,SAEKA,CAACC,GAAoCC,MAAkB1E,EAAA2E,IAAA3E,MAAAA,CAAAA,EAAA4E,GAAAC,EAAA;AAAA,UAAA,aAAA;AAAA,UAAA,MAI5C9F;AAAAA,UAAU,SACPiF;AAAAA,UAAY,SACZ3C;AAAAA,QAAa,GAClByD,EAAKvF,GAAmB,WAAW,CAAC,GAAA;AAAA,UAAAiF,SAAAA,MAAA,CAEvC1F,KAAciG,EAAIN,GAAQ,QAAQ,CAAC;AAAA,QAAA,CAAA,GAAAzE,EAAA4E,GAAAC,EAAA;AAAA,UAAA,aAAA;AAAA,UAAA,MAI9BhG;AAAAA,UAAM,OAAA;AAAA,UAAA,SAEHoF;AAAAA,UAAa,SACb3C;AAAAA,QAAc,GACnBwD,EAAKxF,GAAe,WAAW,CAAC,GAAA;AAAA,UAAAkF,SAAAA,MAAA,CAEnC5F,KAAUmG,EAAIN,GAAQ,SAAS,CAAC;AAAA,QAAA,CAAA,CAAA,CAAA;AAAA,MAGtC,CAAA;AAAA,IAGP;AAEA,aAASO,EAAqB;AAAA,MAAEC,iBAAAA;AAAAA,IAA6E,GAAG;AAC9G,YAAM;AAAA,QAAE9G,SAAAA;AAAAA,QAASE,OAAAA;AAAAA,QAAOI,WAAAA;AAAAA,QAAWC,OAAAA;AAAAA,QAAOK,YAAAA;AAAAA,QAAYJ,MAAAA;AAAAA,QAAMJ,WAAAA;AAAAA,QAAWkB,eAAAA;AAAAA,MAAe,IAAGiB,GACnF;AAAA,QAAEwE,WAAAA;AAAAA,UAAcjE,EAAQyB,OACxByC,IAAaC,EAAI7G,GAAWE,GAAW;AAAA,QAC3C,CAAC,GAAGF,CAAS,MAAM,GAAG2G,MAAc;AAAA,MACtC,CAAC,GACKG,IAAYhH,MAAU,QAAQ,OAAOA,IAAU,KAC/CiH,IAAc,EAAEnH,MAAY,QAAQ,OAAOA,IAAY,MAEvDoH,IAAUC,GAAQ7G,CAAI,GACtB8G,IAAUL,EAAI;AAAA,QAClB,CAAC,GAAG7G,CAAS,OAAO,GAAG;AAAA,QACvB,CAAC,GAAGA,CAAS,gBAAgB,GAAGgH;AAAAA,MAClC,CAAC;AACD;AAAA;AAAA,QACEvF,EAAA,OAAA;AAAA,UAAA,OACYmF;AAAAA,UAAU,SAAWf;AAAAA,UAAwB,OAAS1F;AAAAA,QAAK,GAAA,CAAAsB,EAAA,OAAA;AAAA,UAAA,OACzD,GAAGzB,CAAS;AAAA,QAAQ,GAAA,CAAAyB,EAAA,OAAA;AAAA,UAAA,OAClB,GAAGzB,CAAS;AAAA,WACrBgH,CAAAA,IAAOvF,EAAA,KAAA;AAAA,UAAA,OACI,GAAGzB,CAAS;AAAA,UAAc,eAAA;AAAA,QAAA,GAAA,CACjCI,CAAI,CAAA,IAEL,MAAIqB,EAAA,OAAA;AAAA,UAAA,OACI,GAAGzB,CAAS;AAAA,WACrB8G,CAAAA,IAASrF,EAAA,OAAA;AAAA,UAAA,OACI,GAAGzB,CAAS;AAAA,UAAe,eAAA;AAAA,WACpCF,CAAAA,CAAK,KAEN,IAAI,CAAA,GAEToB,IAAaO,EAAA4E,GAAA;AAAA,UAAA,WAEC,GAAGrG,CAAS;AAAA,UAAY,MAAAyB,EAAA0F,IAAA,MAAA,IAAA;AAAA,UAAA,MAAA;AAAA,UAAA,OAG5B;AAAA,UAAY,MACb3G;AAAAA,UAAU,SACPiF;AAAAA,QAAY,GAAA,IAAA,IAErB,IAAI,CAAA,GAETsB,IAAWtF,EAAA,OAAA;AAAA,UAAA,OACEyF;AAAAA,UAAO,eAAA;AAAA,QAAA,GAAA,CAChBE,GAAWxH,CAAO,IAAIA,EAAQ;AAAA,UAAE8G,iBAAAA;AAAAA,QAAiB,CAAA,IAAI9G,CAAO,CAE7D,IAAA,MAAI6B,EAAA,OAAA;AAAA,UAAA,OACI,GAAGzB,CAAS;AAAA,UAAS,KAAOgD;AAAAA,QACrC+C,GAAAA,CAAAA,EAAc,CAAE,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA;AAAA,IAK3B;AAEA,WAAO,MAAM;;AAEX,YAAM;AAAA,QAAEY,WAAAA;AAAAA,UAAcjE,EAAQyB,OACxBkD,IAAkBV,MAAc,QAAQ,gBAAgB,cACxDW,KAAWhF,IAAAA,EAAM2D,YAAN3D,gBAAAA,EAAAA,KAAAA,IACX;AAAA,QACJpC,WAAAA;AAAAA,QACAF,WAAAA;AAAAA,QACAL,UAAAA;AAAAA,QACAQ,OAAAA;AAAAA,QACAmB,UAAAA,IAAW+F;AAAAA,QACXvH,OAAAA;AAAAA,QACAM,MAAAA;AAAAA,QACAE,QAAAA;AAAAA,QACAE,YAAAA;AAAAA,QACAM,gBAAAA;AAAAA,QACAC,eAAAA;AAAAA,QACAC,mBAAAA;AAAAA,QACAP,UAAAA;AAAAA,QACAC,WAAAA;AAAAA,QACAQ,eAAAA;AAAAA,QACA,GAAGqG;AAAAA,MACL,IAAI/E,EAASL,CAAK;AAElB,UAAIxC;AACF,eAAO2H;AAGT,YAAM;AAAA,QAAEzG,SAAAA;AAAAA,MAAS,IAAG+B,GACd4E,IAAqB;AAAA,QACzB5G,iBAAiB+E;AAAAA,QACjBzF,WAAWyB,EAAW8F;AAAAA,QACtB9G,gBAAgBiF;AAAAA;AAGlB,aAAIvC,EAAa,SAAS,MACxBmE,EAASnG,UAAU,WAGrBI,EAAAiG,IAAApB,EAAA;AAAA,QAAA,KAESpD;AAAAA,MAAU,GAAA;AAAA,QAEb,GAAGqE;AAAAA;AAAAA;AAAAA,QAEH3H,SAASA,CAAC;AAAA,UAAE8G,iBAAAA;AAAAA,QAAiB,MAAKD,EAAqB;AAAA,UAAEC,iBAAAA;AAAAA,QAAgB,CAAC;AAAA,QAC1E7F,SAASA;AAAAA,QACTS,UAAUA;AAAAA,QACV,GAAGkG;AAAAA,MAAQ,CAAA,GAAA;AAAA,QAIXvB,SAAS3D,EAAM2D;AAAAA,MAAO,CAAA;AAAA;EAKhC;AACF,CAAC;"}