{"version":3,"file":"resizableHandler.js","sources":["../../../src/components/resizable/single/resizableHandler.tsx"],"sourcesContent":["import classNames from 'classnames';\nimport * as PropTypes from '../../PropTypes';\nimport { ResizableHandlerFoundation, ResizableHandlerAdapter } from '@douyinfe/semi-foundation/resizable/foundation';\n\nimport { cssClasses } from '@douyinfe/semi-foundation/resizable/constants';\nimport { directionStyles, Direction, HandlerCallback } from '@douyinfe/semi-foundation/resizable/singleConstants';\nimport {\n  CSSProperties,\n  defineComponent,\n  h,\n  onBeforeUnmount,\n  onMounted,\n  onUnmounted,\n  PropType,\n  reactive,\n  ref,\n  useSlots,\n} from 'vue';\nimport { vuePropsMake } from '../../PropTypes';\nimport { CombineProps } from '../../interface';\nimport { useBaseComponent } from '../../_base/baseComponent';\n\n\nconst prefixCls = cssClasses.PREFIX;\n\nexport interface ResizableHandlerProps {\n  direction?: Direction;\n  onResizeStart?: HandlerCallback;\n  className?: string;\n  disabled?: boolean;\n  style?: CSSProperties\n}\n\nexport interface ResizableHandlerState {\n  direction: Direction\n}\nconst propTypes: CombineProps<ResizableHandlerProps> = {\n  direction: PropTypes.string as PropType<ResizableHandlerProps['direction']>,\n  onResizeStart: PropTypes.func as PropType<ResizableHandlerProps['onResizeStart']>,\n  className: PropTypes.string,\n  disabled: PropTypes.bool,\n  style: PropTypes.object,\n};\n\nconst defaultProps: Partial<ResizableHandlerProps> = {\n};\nexport const vuePropsType = vuePropsMake(propTypes, defaultProps)\nconst ResizableHandler = defineComponent({\n  props: { ...vuePropsType },\n  name: 'ResizableHandler',\n  setup(props, { attrs }) {\n    const slots = useSlots();\n\n    const state = reactive({\n      direction: props.direction\n    })\n    const resizeHandlerRef = ref();\n\n    const { adapter: adapterInject, getDataAttr } = useBaseComponent(props, state);\n    function adapter_(): ResizableHandlerAdapter<ResizableHandlerProps, ResizableHandlerState> {\n      return {\n        ...adapterInject(),\n        registerEvent: () => {\n          resizeHandlerRef.value.addEventListener('mousedown', foundation.onMouseDown);\n        },\n        unregisterEvent: () => {\n          resizeHandlerRef.value.removeEventListener('mousedown', foundation.onMouseDown);\n        },\n      };\n    }\n\n    const adapter = adapter_()\n    const foundation = new ResizableHandlerFoundation(adapter);\n    onMounted(()=>{\n      foundation.init();\n    })\n    onBeforeUnmount(()=>{\n      foundation.destroy();\n    })\n\n\n    return () => {\n      const { style, className } = props;\n      return (\n        <div\n          class={classNames(className, prefixCls + '-resizableHandler')}\n          style={{\n            ...directionStyles[props.direction],\n            ...style\n          }}\n          ref={resizeHandlerRef}\n        >\n          { slots.default?.() }\n        </div>\n      );\n    };\n  },\n});\n\n\n\nexport default ResizableHandler;\n"],"names":["prefixCls","cssClasses","PREFIX","propTypes","direction","PropTypes","string","onResizeStart","func","className","disabled","bool","style","object","defaultProps","vuePropsType","vuePropsMake","ResizableHandler","defineComponent","props","name","setup","attrs","slots","useSlots","state","reactive","resizeHandlerRef","ref","adapter","adapterInject","getDataAttr","useBaseComponent","adapter_","registerEvent","value","addEventListener","foundation","onMouseDown","unregisterEvent","removeEventListener","ResizableHandlerFoundation","onMounted","init","onBeforeUnmount","destroy","_createVNode","classNames","directionStyles","default"],"mappings":";;;;;;;;AAuBA,MAAMA,IAAYC,EAAWC,QAavBC,IAAiD;AAAA,EACrDC,WAAWC,EAAUC;AAAAA,EACrBC,eAAeF,EAAUG;AAAAA,EACzBC,WAAWJ,EAAUC;AAAAA,EACrBI,UAAUL,EAAUM;AAAAA,EACpBC,OAAOP,EAAUQ;AACnB,GAEMC,IAA+C,CAAA,GAExCC,IAAeC,EAAab,GAAWW,CAAY,GAC1DG,IAAmBC,gBAAAA,EAAgB;AAAA,EACvCC,OAAO;AAAA,IAAE,GAAGJ;AAAAA,EAAc;AAAA,EAC1BK,MAAM;AAAA,EACNC,MAAMF,GAAO;AAAA,IAAEG,OAAAA;AAAAA,EAAM,GAAG;AACtB,UAAMC,IAAQC,KAERC,IAAQC,EAAS;AAAA,MACrBtB,WAAWe,EAAMf;AAAAA,IACnB,CAAC,GACKuB,IAAmBC,KAEnB;AAAA,MAAEC,SAASC;AAAAA,MAAeC,aAAAA;AAAAA,IAAY,IAAIC,EAAiBb,GAAOM,CAAK;AAC7E,aAASQ,IAAkF;AACzF,aAAO;AAAA,QACL,GAAGH,EAAe;AAAA,QAClBI,eAAeA,MAAM;AACnBP,UAAAA,EAAiBQ,MAAMC,iBAAiB,aAAaC,EAAWC,WAAW;AAAA,QAC5E;AAAA,QACDC,iBAAiBA,MAAM;AACrBZ,UAAAA,EAAiBQ,MAAMK,oBAAoB,aAAaH,EAAWC,WAAW;AAAA,QAChF;AAAA;IAEJ;AAEA,UAAMT,IAAUI,KACVI,IAAa,IAAII,EAA2BZ,CAAO;AACzDa,WAAAA,EAAU,MAAI;AACZL,MAAAA,EAAWM,KAAI;AAAA,IACjB,CAAC,GACDC,EAAgB,MAAI;AAClBP,MAAAA,EAAWQ,QAAO;AAAA,IACpB,CAAC,GAGM,MAAM;;AACX,YAAM;AAAA,QAAEjC,OAAAA;AAAAA,QAAOH,WAAAA;AAAAA,MAAW,IAAGU;AAC7B,aAAA2B,EAAA,OAAA;AAAA,QAAA,OAEWC,EAAWtC,GAAWT,IAAY,mBAAmB;AAAA,QAAC,OACtD;AAAA,UACL,GAAGgD,EAAgB7B,EAAMf,SAAS;AAAA,UAClC,GAAGQ;AAAAA,QACJ;AAAA,QAAA,KACIe;AAAAA,MAAgB,GAAA,EAEnBJ,IAAAA,EAAM0B,YAAN1B,gBAAAA,EAAAA,KAAAA,EAAiB,CAAA;AAAA;EAI3B;AACF,CAAC;"}