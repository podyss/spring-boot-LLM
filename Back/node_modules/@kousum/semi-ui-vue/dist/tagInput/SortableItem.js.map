{"version":3,"file":"SortableItem.js","sources":["../../src/components/tagInput/SortableItem.tsx"],"sourcesContent":["import { defineComponent, ref, shallowRef, watch } from 'vue';\nimport { CombineProps } from '../interface';\nimport { useSortable } from '@kousum/dnd-kit-vue/sortable';\nimport { pointerIntersection } from '@dnd-kit/collision';\n\ninterface SortableItemProps {\n  id: number | string;\n  item: any;\n  index: number;\n}\n\nexport const vuePropsType: CombineProps<SortableItemProps> = {\n  id: {\n    type: [String, Number],\n    required: true\n  },\n  item: {\n    type: Function,\n    required: true\n  },\n  index: {\n    type: Number,\n    required: true\n  },\n};\nconst SortableItem = defineComponent({\n  props: { ...vuePropsType },\n  name: 'SortableItem',\n  setup(props, {}) {\n    const id = shallowRef(props.id)\n    watch(()=>props.id, (value, oldValue)=>{\n      if(value !== oldValue){\n        id.value = oldValue;\n      }\n    })\n    const index = shallowRef(props.index)\n    watch(()=>props.index, (value, oldValue)=>{\n      if(value !== oldValue){\n        index.value = oldValue;\n      }\n    })\n    const element = ref<Element | null>(null);\n    const handleRef = ref<HTMLButtonElement | null>(null);\n    const {isDragSource} = useSortable({\n      id: id as any,\n      index: index as any,\n      element,\n      handle: handleRef,\n      collisionDetector: pointerIntersection\n    });\n\n    return () => {\n      return props.item({ element, handleRef: (v)=>{handleRef.value = v?.$el}, attributes: {shadow: isDragSource?.value,}});\n    };\n  },\n});\n\nexport default SortableItem;\n"],"names":["vuePropsType","id","type","String","Number","required","item","Function","index","SortableItem","defineComponent","props","name","setup","shallowRef","watch","value","oldValue","element","ref","handleRef","isDragSource","useSortable","handle","collisionDetector","pointerIntersection","v","$el","attributes","shadow"],"mappings":";;;AAWO,MAAMA,IAAgD;AAAA,EAC3DC,IAAI;AAAA,IACFC,MAAM,CAACC,QAAQC,MAAM;AAAA,IACrBC,UAAU;AAAA,EACX;AAAA,EACDC,MAAM;AAAA,IACJJ,MAAMK;AAAAA,IACNF,UAAU;AAAA,EACX;AAAA,EACDG,OAAO;AAAA,IACLN,MAAME;AAAAA,IACNC,UAAU;AAAA,EACZ;AACF,GACMI,IAAeC,gBAAAA,EAAgB;AAAA,EACnCC,OAAO;AAAA,IAAE,GAAGX;AAAAA,EAAc;AAAA,EAC1BY,MAAM;AAAA,EACNC,MAAMF,GAAO,IAAI;AACf,UAAMV,IAAKa,EAAWH,EAAMV,EAAE;AAC9Bc,IAAAA,EAAM,MAAIJ,EAAMV,IAAI,CAACe,GAAOC,MAAW;AACrC,MAAGD,MAAUC,MACXhB,EAAGe,QAAQC;AAAAA,IAEf,CAAC;AACD,UAAMT,IAAQM,EAAWH,EAAMH,KAAK;AACpCO,IAAAA,EAAM,MAAIJ,EAAMH,OAAO,CAACQ,GAAOC,MAAW;AACxC,MAAGD,MAAUC,MACXT,EAAMQ,QAAQC;AAAAA,IAElB,CAAC;AACD,UAAMC,IAAUC,EAAoB,IAAI,GAClCC,IAAYD,EAA8B,IAAI,GAC9C;AAAA,MAACE,cAAAA;AAAAA,IAAa,IAAGC,EAAY;AAAA,MACjCrB,IAAIA;AAAAA,MACJO,OAAOA;AAAAA,MACPU,SAAAA;AAAAA,MACAK,QAAQH;AAAAA,MACRI,mBAAmBC;AAAAA,IACrB,CAAC;AAED,WAAO,MACEd,EAAML,KAAK;AAAA,MAAEY,SAAAA;AAAAA,MAASE,WAAYM,CAAAA,MAAI;AAACN,QAAAA,EAAUJ,QAAQU,KAAAA,gBAAAA,EAAGC;AAAAA,MAAI;AAAA,MAAEC,YAAY;AAAA,QAACC,QAAQR,KAAAA,gBAAAA,EAAcL;AAAAA,MAAM;AAAA,IAAC,CAAC;AAAA,EAExH;AACF,CAAC;"}