{"version":3,"file":"index.js","sources":["../../../src/components/colorPicker/ColorSlider/index.tsx"],"sourcesContent":["import ColorPickerFoundation from '@douyinfe/semi-foundation/colorPicker/foundation';\nimport { cssClasses } from '@douyinfe/semi-foundation/colorPicker/constants';\nimport cls from 'classnames';\nimport ColorSliderFoundation, {\n  ColorSliderAdapter,\n  ColorSliderBaseProps,\n  ColorSliderBaseState,\n} from '@douyinfe/semi-foundation/colorPicker/ColorSliderFoundation';\nimport { useBaseComponent } from '../../_base/baseComponent';\nimport { CSSProperties, defineComponent, h, reactive, ref, useSlots, watch } from 'vue';\nimport { CombineProps } from '../../interface';\n\nexport interface ColorSliderProps extends ColorSliderBaseProps {\n  className?: string;\n  style?: CSSProperties;\n}\n\nexport interface ColorSliderState extends ColorSliderBaseState {}\n\nexport const vuePropsType: CombineProps<ColorSliderProps> = {\n  className: String,\n  style: Object,\n  foundation: {\n    type: Object,\n    required: true,\n  },\n  handleSize: {\n    type: Number,\n    required: true,\n  },\n  height: {\n    type: Number,\n    required: true,\n  },\n  hue: {\n    type: Number,\n    required: true,\n  },\n  width: {\n    type: Number,\n    required: true,\n  },\n};\nconst ColorSlider = defineComponent({\n  props: { ...vuePropsType },\n  name: 'ColorSlider',\n  setup(props, { attrs }) {\n    const slots = useSlots();\n    const dom = ref();\n    const state = reactive<ColorSliderState>({\n      handlePosition: (props.hue / 360) * props.width - props.handleSize / 2,\n      isHandleGrabbing: false,\n    });\n    const { adapter: adapterInject } = useBaseComponent(props, state);\n    function adapter_(): ColorSliderAdapter<ColorSliderProps, ColorSliderState> {\n      return {\n        ...adapterInject(),\n        handleMouseDown: (e: any) => {\n          state.isHandleGrabbing = true;\n          window.addEventListener('mousemove', foundation.setHandlePositionByMousePosition);\n          window.addEventListener('mouseup', foundation.handleMouseUp);\n        },\n        handleMouseUp: (e: MouseEvent) => {\n          state.isHandleGrabbing = false;\n          window.removeEventListener('mousemove', foundation.setHandlePositionByMousePosition);\n          window.removeEventListener('mouseup', foundation.handleMouseUp);\n        },\n        getColorPickerFoundation: () => props.foundation,\n        getDOM: () => dom.value,\n      };\n    }\n    const adapter = adapter_();\n    const foundation = new ColorSliderFoundation(adapter);\n\n    watch([() => props.hue], (value, [prevPropsHue], onCleanup) => {\n      if (prevPropsHue !== props.hue) {\n        state.handlePosition = (props.hue / 360) * props.width - props.handleSize / 2;\n      }\n    });\n    const handleClick = (e: MouseEvent) => {\n      foundation.setHandlePositionByMousePosition(e);\n      foundation.handleMouseDown(e);\n    };\n\n    return () => {\n      return (\n        <div\n          class={cls(`${cssClasses.PREFIX}-colorSlider`, props.className)}\n          ref={dom}\n          onMousedown={handleClick}\n          style={{\n            width: props.width + 'px',\n            height: props.height + 'px',\n            ...props.style,\n          }}\n        >\n          <div\n            class={`${cssClasses.PREFIX}-handle`}\n            style={{\n              width: props.handleSize + 'px',\n              height: props.handleSize + 'px',\n              left: state.handlePosition + 'px',\n              top: `50%`,\n              transform: `translateY(-50%)`,\n              backgroundColor: ColorPickerFoundation.hsvaToHslString({ h: props.hue, s: 100, v: 100, a: 1 }),\n            }}\n            onMousedown={(e) => foundation.handleMouseDown(e)}\n          ></div>\n        </div>\n      );\n    };\n  },\n});\n\nexport default ColorSlider;\n"],"names":["vuePropsType","className","String","style","Object","foundation","type","required","handleSize","Number","height","hue","width","ColorSlider","defineComponent","props","name","setup","attrs","useSlots","dom","ref","state","reactive","handlePosition","isHandleGrabbing","adapter","adapterInject","useBaseComponent","adapter_","handleMouseDown","e","window","addEventListener","setHandlePositionByMousePosition","handleMouseUp","removeEventListener","getColorPickerFoundation","getDOM","value","ColorSliderFoundation","watch","prevPropsHue","onCleanup","handleClick","_createVNode","cls","cssClasses","PREFIX","left","top","transform","backgroundColor","ColorPickerFoundation","hsvaToHslString","h","s","v","a"],"mappings":";;;;;;AAmBO,MAAMA,IAA+C;AAAA,EAC1DC,WAAWC;AAAAA,EACXC,OAAOC;AAAAA,EACPC,YAAY;AAAA,IACVC,MAAMF;AAAAA,IACNG,UAAU;AAAA,EACX;AAAA,EACDC,YAAY;AAAA,IACVF,MAAMG;AAAAA,IACNF,UAAU;AAAA,EACX;AAAA,EACDG,QAAQ;AAAA,IACNJ,MAAMG;AAAAA,IACNF,UAAU;AAAA,EACX;AAAA,EACDI,KAAK;AAAA,IACHL,MAAMG;AAAAA,IACNF,UAAU;AAAA,EACX;AAAA,EACDK,OAAO;AAAA,IACLN,MAAMG;AAAAA,IACNF,UAAU;AAAA,EACZ;AACF,GACMM,IAAcC,gBAAAA,EAAgB;AAAA,EAClCC,OAAO;AAAA,IAAE,GAAGf;AAAAA,EAAc;AAAA,EAC1BgB,MAAM;AAAA,EACNC,MAAMF,GAAO;AAAA,IAAEG,OAAAA;AAAAA,EAAM,GAAG;AACRC,IAAAA,EAAU;AACxB,UAAMC,IAAMC,KACNC,IAAQC,EAA2B;AAAA,MACvCC,gBAAiBT,EAAMJ,MAAM,MAAOI,EAAMH,QAAQG,EAAMP,aAAa;AAAA,MACrEiB,kBAAkB;AAAA,IACpB,CAAC,GACK;AAAA,MAAEC,SAASC;AAAAA,IAAc,IAAIC,EAAiBb,GAAOO,CAAK;AAChE,aAASO,IAAmE;AAC1E,aAAO;AAAA,QACL,GAAGF,EAAe;AAAA,QAClBG,iBAAkBC,CAAAA,MAAW;AAC3BT,UAAAA,EAAMG,mBAAmB,IACzBO,OAAOC,iBAAiB,aAAa5B,EAAW6B,gCAAgC,GAChFF,OAAOC,iBAAiB,WAAW5B,EAAW8B,aAAa;AAAA,QAC5D;AAAA,QACDA,eAAgBJ,CAAAA,MAAkB;AAChCT,UAAAA,EAAMG,mBAAmB,IACzBO,OAAOI,oBAAoB,aAAa/B,EAAW6B,gCAAgC,GACnFF,OAAOI,oBAAoB,WAAW/B,EAAW8B,aAAa;AAAA,QAC/D;AAAA,QACDE,0BAA0BA,MAAMtB,EAAMV;AAAAA,QACtCiC,QAAQA,MAAMlB,EAAImB;AAAAA;IAEtB;AACA,UAAMb,IAAUG,KACVxB,IAAa,IAAImC,EAAsBd,CAAO;AAEpDe,IAAAA,EAAM,CAAC,MAAM1B,EAAMJ,GAAG,GAAG,CAAC4B,GAAO,CAACG,CAAY,GAAGC,MAAc;AAC7D,MAAID,MAAiB3B,EAAMJ,QACzBW,EAAME,iBAAkBT,EAAMJ,MAAM,MAAOI,EAAMH,QAAQG,EAAMP,aAAa;AAAA,IAEhF,CAAC;AACD,UAAMoC,IAAeb,CAAAA,MAAkB;AACrC1B,MAAAA,EAAW6B,iCAAiCH,CAAC,GAC7C1B,EAAWyB,gBAAgBC,CAAC;AAAA;AAG9B,WAAO,MACLc,EAAA,OAAA;AAAA,MAAA,OAEWC,EAAI,GAAGC,EAAWC,MAAM,gBAAgBjC,EAAMd,SAAS;AAAA,MAAC,KAC1DmB;AAAAA,MAAG,aACKwB;AAAAA,MAAW,OACjB;AAAA,QACLhC,OAAOG,EAAMH,QAAQ;AAAA,QACrBF,QAAQK,EAAML,SAAS;AAAA,QACvB,GAAGK,EAAMZ;AAAAA,MACX;AAAA,IAAC,GAAA,CAAA0C,EAAA,OAAA;AAAA,MAAA,OAGQ,GAAGE,EAAWC,MAAM;AAAA,MAAS,OAC7B;AAAA,QACLpC,OAAOG,EAAMP,aAAa;AAAA,QAC1BE,QAAQK,EAAMP,aAAa;AAAA,QAC3ByC,MAAM3B,EAAME,iBAAiB;AAAA,QAC7B0B,KAAK;AAAA,QACLC,WAAW;AAAA,QACXC,iBAAiBC,EAAsBC,gBAAgB;AAAA,UAAEC,GAAGxC,EAAMJ;AAAAA,UAAK6C,GAAG;AAAA,UAAKC,GAAG;AAAA,UAAKC,GAAG;AAAA,SAAG;AAAA,MAC9F;AAAA,MAAA,aACa3B,CAAAA,MAAM1B,EAAWyB,gBAAgBC,CAAC;AAAA,IAAC,GAAA,IAAA,CAAA,CAAA;AAAA,EAK3D;AACF,CAAC;"}