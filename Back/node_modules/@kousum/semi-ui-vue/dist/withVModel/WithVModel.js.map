{"version":3,"file":"WithVModel.js","sources":["../../src/components/withVModel/WithVModel.tsx"],"sourcesContent":["import { defineComponent, DefineSetupFnComponent, ref } from 'vue';\nimport { omit } from 'lodash';\nimport { WithFieldOption } from '@douyinfe/semi-foundation/form/interface';\nimport * as ObjectUtil from '@douyinfe/semi-foundation/utils/object';\n\nexport default function WithVModel<T>(Comp: DefineSetupFnComponent<T>, opt?: WithFieldOption) {\n  return defineComponent({\n    name: Comp.name,\n    props: {\n      //@ts-ignore\n      ...Comp.props,\n      modelValue: [Number, String, Object, Array, Boolean],\n      'onUpdate:modelValue': Function,\n    },\n    setup(props: any, { emit, slots, expose }) {\n      const instance = ref();\n\n      expose({\n        ...instance.value,\n      });\n      return () => {\n        if (props['onUpdate:modelValue']) {\n          return (\n            //@ts-ignore\n            <Comp\n              {...omit(props, 'update:modelValue', 'modelValue', opt?.valueKey || 'value', 'onChange')}\n              {...{\n                [opt?.valueKey || 'value']: props.modelValue,\n                [opt?.onKeyChangeFnName || 'onChange']: (v) => {\n                  // console.log(v);\n                  let val = opt?.valuePath ? ObjectUtil.get(v, opt.valuePath) : v;\n                  if (Array.isArray(val)) {\n                    val = [...val];\n                  }\n                  props.onChange?.(val);\n                  props['onUpdate:modelValue']?.(val);\n                },\n              }}\n            >\n              {{ default: slots.default }}\n            </Comp>\n          );\n        } else {\n          //@ts-ignore\n          return <Comp {...omit(props, 'update:modelValue', 'modelValue')} />;\n        }\n      };\n    },\n  });\n}\n"],"names":["WithVModel","Comp","opt","name","props","modelValue","Number","String","Object","Array","Boolean","Function","setup","emit","slots","expose","instance","ref","value","_createVNode","_mergeProps","omit","valueKey","onKeyChangeFnName","v","val","valuePath","ObjectUtil","get","isArray","onChange","default"],"mappings":";;;AAKe,SAASA,EAAcC,GAAiCC,GAAuB;AAC5F,2BAAuB;AAAA,IACrBC,MAAMF,EAAKE;AAAAA,IACXC,OAAO;AAAA;AAAA,MAEL,GAAGH,EAAKG;AAAAA,MACRC,YAAY,CAACC,QAAQC,QAAQC,QAAQC,OAAOC,OAAO;AAAA,MACnD,uBAAuBC;AAAAA,IACxB;AAAA,IACDC,MAAMR,GAAY;AAAA,MAAES,MAAAA;AAAAA,MAAMC,OAAAA;AAAAA,MAAOC,QAAAA;AAAAA,IAAO,GAAG;AACzC,YAAMC,IAAWC;AAEjBF,aAAAA,EAAO;AAAA,QACL,GAAGC,EAASE;AAAAA,MACd,CAAC,GACM,MACDd,EAAM,qBAAqB;AAAA;AAAA,QAE3Be,EAAAlB,GAAAmB,EAEMC,EAAKjB,GAAO,qBAAqB,eAAcF,KAAAA,gBAAAA,EAAKoB,aAAY,SAAS,UAAU,GAAC;AAAA,UAEtF,EAACpB,KAAAA,gBAAAA,EAAKoB,aAAY,OAAO,GAAGlB,EAAMC;AAAAA,UAClC,EAACH,KAAAA,gBAAAA,EAAKqB,sBAAqB,UAAU,GAAIC,CAAAA,MAAM;;AAE7C,gBAAIC,IAAMvB,KAAAA,QAAAA,EAAKwB,YAAYC,EAAWC,IAAIJ,GAAGtB,EAAIwB,SAAS,IAAIF;AAC9D,YAAIf,MAAMoB,QAAQJ,CAAG,MACnBA,IAAM,CAAC,GAAGA,CAAG,KAEfrB,IAAAA,EAAM0B,aAAN1B,QAAAA,EAAAA,KAAAA,GAAiBqB,KACjBrB,IAAAA,EAAM,2BAANA,QAAAA,EAAAA,KAAAA,GAA+BqB;AAAAA,UACjC;AAAA,QAAC,CAAA,GAAA;AAAA,UAGAM,SAASjB,EAAMiB;AAAAA,QAAO,CAAA;AAAA,UAK7BZ,EAAAlB,GAAiBoB,EAAKjB,GAAO,qBAAqB,YAAY,GAAC,IAAA;AAAA,IAGrE;AAAA,EACF,CAAC;AACH;"}