{"version":3,"file":"Sider.js","sources":["../../src/components/layout/Sider.tsx"],"sourcesContent":["import { ComponentObjectPropsOptions, CSSProperties, defineComponent, h, onMounted, PropType } from 'vue';\nimport cls from 'classnames';\nimport { cssClasses, strings } from '@douyinfe/semi-foundation/layout/constants';\nimport getDataAttr from '@douyinfe/semi-foundation/utils/getDataAttr';\nimport { registerMediaQuery } from '../_utils/index';\nimport { useLayoutContext } from './context/Consumer';\nimport { CombineProps } from '../interface';\n\nexport interface ResponsiveMap {\n  xs: string;\n  sm: string;\n  md: string;\n  lg: string;\n  xl: string;\n  xxl: string;\n}\n\nconst responsiveMap: ResponsiveMap = {\n  xs: '(max-width: 575px)',\n  sm: '(min-width: 576px)',\n  md: '(min-width: 768px)',\n  lg: '(min-width: 992px)',\n  xl: '(min-width: 1200px)',\n  xxl: '(min-width: 1600px)',\n};\n\nconst generateId = ((): (() => string) => {\n  let i = 0;\n  return (): string => {\n    i += 1;\n    return `${cssClasses.PREFIX}-sider-${i}`;\n  };\n})();\n\nconst bpt = strings.BREAKPOINT;\n\nexport interface SiderProps {\n  prefixCls?: string;\n  style?: CSSProperties;\n  className?: string;\n  breakpoint?: Array<keyof ResponsiveMap>;\n  onBreakpoint?: (screen: keyof ResponsiveMap, match: boolean) => void;\n  'aria-label'?: string;\n  role?: string;\n}\n\nexport const vuePropsType: CombineProps<SiderProps> = {\n  prefixCls: {\n    type: String as PropType<SiderProps['prefixCls']>,\n    default: cssClasses.PREFIX,\n  },\n  style: [String, Object] as PropType<SiderProps['style']>,\n  className: String,\n  breakpoint: Array,\n  // onBreakpoin: Function as PropType<SiderProps['onBreakpoin']>,\n  'aria-label': String,\n  role: String,\n  onBreakpoint: Function as PropType<SiderProps['onBreakpoint']>,\n};\nconst Sider = defineComponent({\n  props: { ...vuePropsType },\n  name: 'LayoutSider',\n  setup(props, { slots }) {\n    let unRegisters: Array<() => void> = [];\n    const uniqueId = generateId();\n    const { context } = useLayoutContext();\n\n    onMounted(() => {\n      const { breakpoint } = props;\n      const matchBpt: Array<keyof ResponsiveMap> = (Object.keys(responsiveMap) as (keyof ResponsiveMap)[]).filter(\n        (item) => breakpoint && breakpoint.indexOf(item) !== -1\n      ) as any;\n      const unRegisters_ = matchBpt.map((screen) =>\n        registerMediaQuery(responsiveMap[screen], {\n          match: () => {\n            responsiveHandler(screen, true);\n          },\n          unmatch: () => {\n            responsiveHandler(screen, false);\n          },\n        })\n      );\n      unRegisters = unRegisters_;\n\n      if (context.value.siderHook) {\n        context.value.siderHook.addSider(uniqueId);\n      }\n    });\n\n    function responsiveHandler(screen: keyof ResponsiveMap, matches: boolean): void {\n      const { onBreakpoint } = props;\n      if (onBreakpoint) {\n        onBreakpoint(screen, matches);\n      }\n    }\n\n    return () => {\n      const { prefixCls, className, style, ...others } = props;\n      const classString = cls(className, {\n        [`${prefixCls}-sider`]: true,\n      });\n      return (\n        <aside class={classString} aria-label={props['aria-label']} style={style} {...getDataAttr(others)}>\n          <div class={`${prefixCls}-sider-children`}>{slots.default ? slots.default() : null}</div>\n        </aside>\n      );\n    };\n  },\n});\n\nexport default Sider;\n"],"names":["responsiveMap","xs","sm","md","lg","xl","xxl","generateId","i","cssClasses","PREFIX","strings","BREAKPOINT","vuePropsType","prefixCls","type","String","default","style","Object","className","breakpoint","Array","role","onBreakpoint","Function","Sider","defineComponent","props","name","setup","slots","uniqueId","context","useLayoutContext","onMounted","matchBpt","keys","filter","item","indexOf","map","screen","registerMediaQuery","match","responsiveHandler","unmatch","value","siderHook","addSider","matches","others","classString","cls","_createVNode","_mergeProps","getDataAttr"],"mappings":";;;;;;AAiBA,MAAMA,IAA+B;AAAA,EACnCC,IAAI;AAAA,EACJC,IAAI;AAAA,EACJC,IAAI;AAAA,EACJC,IAAI;AAAA,EACJC,IAAI;AAAA,EACJC,KAAK;AACP,GAEMC,IAAc,uBAAsB;AACxC,MAAIC,IAAI;AACR,SAAO,OACLA,KAAK,GACE,GAAGC,EAAWC,MAAM,UAAUF,CAAC;AAE1C;AAEYG,EAAQC;AAYb,MAAMC,IAAyC;AAAA,EACpDC,WAAW;AAAA,IACTC,MAAMC;AAAAA,IACNC,SAASR,EAAWC;AAAAA,EACrB;AAAA,EACDQ,OAAO,CAACF,QAAQG,MAAM;AAAA,EACtBC,WAAWJ;AAAAA,EACXK,YAAYC;AAAAA;AAAAA,EAEZ,cAAcN;AAAAA,EACdO,MAAMP;AAAAA,EACNQ,cAAcC;AAChB,GACMC,IAAQC,gBAAAA,EAAgB;AAAA,EAC5BC,OAAO;AAAA,IAAE,GAAGf;AAAAA,EAAc;AAAA,EAC1BgB,MAAM;AAAA,EACNC,MAAMF,GAAO;AAAA,IAAEG,OAAAA;AAAAA,EAAM,GAAG;AAEtB,UAAMC,IAAWzB,KACX;AAAA,MAAE0B,SAAAA;AAAAA,IAAS,IAAGC,EAAgB;AAEpCC,IAAAA,EAAU,MAAM;AACd,YAAM;AAAA,QAAEd,YAAAA;AAAAA,MAAY,IAAGO;AAIFQ,MAHyBjB,OAAOkB,KAAKrC,CAAa,EAA8BsC,OAClGC,CAAAA,MAASlB,KAAcA,EAAWmB,QAAQD,CAAI,MAAM,EACvD,EAC8BE,IAAKC,CAAAA,MACjCC,EAAmB3C,EAAc0C,CAAM,GAAG;AAAA,QACxCE,OAAOA,MAAM;AACXC,UAAAA,EAAkBH,GAAQ,EAAI;AAAA,QAC/B;AAAA,QACDI,SAASA,MAAM;AACbD,UAAAA,EAAkBH,GAAQ,EAAK;AAAA,QACjC;AAAA,MACF,CAAC,CACH,GAGIT,EAAQc,MAAMC,aAChBf,EAAQc,MAAMC,UAAUC,SAASjB,CAAQ;AAAA,IAE7C,CAAC;AAED,aAASa,EAAkBH,GAA6BQ,GAAwB;AAC9E,YAAM;AAAA,QAAE1B,cAAAA;AAAAA,MAAc,IAAGI;AACzB,MAAIJ,KACFA,EAAakB,GAAQQ,CAAO;AAAA,IAEhC;AAEA,WAAO,MAAM;AACX,YAAM;AAAA,QAAEpC,WAAAA;AAAAA,QAAWM,WAAAA;AAAAA,QAAWF,OAAAA;AAAAA,QAAO,GAAGiC;AAAAA,MAAQ,IAAGvB,GAC7CwB,IAAcC,EAAIjC,GAAW;AAAA,QACjC,CAAC,GAAGN,CAAS,QAAQ,GAAG;AAAA,MAC1B,CAAC;AACD,aAAAwC,WAAAC,EAAA;AAAA,QAAA,OACgBH;AAAAA,QAAW,cAAcxB,EAAM,YAAY;AAAA,QAAC,OAASV;AAAAA,MAAK,GAAMsC,EAAYL,CAAM,CAAC,IAAAG,EAAA,OAAA;AAAA,QAAA,OACnF,GAAGxC,CAAS;AAAA,SAAoBiB,CAAAA,EAAMd,UAAUc,EAAMd,QAAO,IAAK,IAAI,CAAA,CAAA,CAAA;AAAA;EAI1F;AACF,CAAC;"}