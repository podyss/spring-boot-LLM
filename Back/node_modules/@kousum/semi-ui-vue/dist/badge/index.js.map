{"version":3,"file":"index.js","sources":["../../src/components/badge/index.tsx"],"sourcesContent":["import cls from 'classnames';\nimport * as PropTypes from '../PropTypes';\nimport { isNumber, isString, noop } from 'lodash';\nimport { cssClasses, strings } from '@douyinfe/semi-foundation/badge/constants';\nimport '@douyinfe/semi-foundation/badge/badge.scss';\nimport { ComponentObjectPropsOptions, CSSProperties, defineComponent, h, PropType, useSlots } from 'vue';\nimport { vuePropsMake } from '../PropTypes';\nimport { useConfigContext } from '../configProvider/context/Consumer';\nimport { CombineProps, VueJsxNode } from '../interface';\nimport { useHasInProps } from '../_base/baseComponent';\n\nconst prefixCls = cssClasses.PREFIX;\n\nexport type BadgeType = 'primary' | 'secondary' | 'tertiary' | 'danger' | 'warning' | 'success';\nexport type BadgeTheme = 'solid' | 'light' | 'inverted';\nexport type BadgePosition = 'leftTop' | 'leftBottom' | 'rightTop' | 'rightBottom';\n\nexport interface BadgeProps {\n  count?: VueJsxNode;\n  dot?: boolean;\n  type?: BadgeType;\n  theme?: BadgeTheme;\n  position?: BadgePosition;\n  overflowCount?: number;\n  style?: CSSProperties;\n  className?: string;\n  onMouseEnter?: (e: MouseEvent) => any;\n  onMouseLeave?: (e: MouseEvent) => any;\n  onClick?: (e: MouseEvent) => any;\n  countClassName?: string;\n  countStyle?: CSSProperties;\n}\n\nconst propTypes: CombineProps<BadgeProps> = {\n  count: PropTypes.node,\n  dot: PropTypes.bool,\n  type: PropTypes.string as PropType<BadgeProps['type']>,\n  theme: PropTypes.string as PropType<BadgeProps['theme']>,\n  position: PropTypes.string as PropType<BadgeProps['position']>,\n  overflowCount: PropTypes.number,\n  style: PropTypes.object,\n  className: PropTypes.string,\n  onClick: PropTypes.func as PropType<BadgeProps['onClick']>,\n  onMouseEnter: PropTypes.func as PropType<BadgeProps['onMouseEnter']>,\n  onMouseLeave: PropTypes.func as PropType<BadgeProps['onMouseLeave']>,\n  countClassName: PropTypes.string,\n  countStyle: PropTypes.object,\n};\n\nconst defaultProps = {\n  dot: false,\n  type: 'primary',\n  theme: 'solid',\n  className: '',\n  onClick: () => noop,\n  onMouseEnter: () => noop,\n  onMouseLeave: () => noop,\n};\n\nexport const vuePropsType = vuePropsMake<BadgeProps>(propTypes, defaultProps);\nconst Badge = defineComponent({\n  props: { ...vuePropsType },\n  name: 'Badge',\n  setup(props, {}) {\n    const {getProps} = useHasInProps()\n    const slots = useSlots();\n\n    const { context } = useConfigContext();\n\n    return () => {\n      const { direction } = context.value;\n      // DefaultPosition here, static can't get this\n      const defaultPosition = direction === 'rtl' ? 'leftTop' : 'rightTop';\n      // eslint-disable-next-line max-len\n      const {\n        count,\n        dot,\n        type,\n        countClassName,\n        countStyle,\n        theme,\n        position = defaultPosition,\n        overflowCount,\n        className,\n        ...rest\n      } = getProps(props);\n      const children = slots.default?.();\n      const custom = count && !(isNumber(count) || isString(count));\n      const showBadge = count !== null && typeof count !== 'undefined';\n      const wrapper = cls(countClassName, {\n        [`${prefixCls}-${type}`]: !custom,\n        [`${prefixCls}-${theme}`]: !custom,\n        [`${prefixCls}-${position}`]: Boolean(position) && Boolean(children),\n        [`${prefixCls}-block`]: !children,\n        [`${prefixCls}-dot`]: dot,\n        [`${prefixCls}-count`]: !dot && !custom && showBadge,\n        [`${prefixCls}-custom`]: custom,\n      });\n      let content;\n      if (isNumber(count)) {\n        content = overflowCount && overflowCount < count ? `${overflowCount}+` : `${count}`;\n      } else {\n        content = count;\n      }\n      return (\n        <span class={cls(prefixCls, className)} {...rest}>\n          {children}\n          <span class={wrapper} style={countStyle} x-semi-prop=\"count\">\n            {dot ? null : content}\n          </span>\n        </span>\n      );\n    };\n  },\n});\n\nexport default Badge;\n"],"names":["prefixCls","cssClasses","PREFIX","propTypes","count","PropTypes","node","dot","bool","type","string","theme","position","overflowCount","number","style","object","className","onClick","func","onMouseEnter","onMouseLeave","countClassName","countStyle","defaultProps","noop","vuePropsType","vuePropsMake","Badge","defineComponent","props","name","setup","getProps","useHasInProps","slots","useSlots","context","useConfigContext","direction","value","defaultPosition","rest","children","default","custom","isNumber","isString","showBadge","wrapper","cls","Boolean","content","_createVNode","_mergeProps"],"mappings":"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"}